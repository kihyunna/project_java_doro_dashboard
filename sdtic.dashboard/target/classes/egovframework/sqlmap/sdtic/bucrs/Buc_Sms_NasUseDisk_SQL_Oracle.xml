<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="bucNasUseDiskDAO">

    <typeAlias  alias="egovMap"   type="egovframework.rte.psl.dataaccess.util.EgovMap"  />
    <typeAlias  alias="bucCollectVo"  type="egovframework.com.sdtic.bucrs.service.BucCollectVO" />

    <select id="bucNasUseDiskDAO.bucCollectNasUseDiskAjax" resultClass="bucCollectVo">
        /* bucCollectNasUseDiskAjax 조회 */
        <![CDATA[
        SELECT o1.obj_name, o2.rsctype_id, o2.rsc_key_name, o3.resultvalue_double, CURDATE() AS collect_date  FROM obj o1

		INNER JOIN obj_rsc_key o2 ON o2.obj_id=o1.obj_id
		
		INNER JOIN obj_rsc_rslt o3 ON o3.hashkey_id=o2.hashkey_id
		
		WHERE o2.rsctype_id='DISK' AND o2.rsc_id='DISK_USEDSIZE'
		and binary substr(o2.rsc_key_name, 2, 1) regexp '^[A-Z]+$$'
		and binary substr(o2.rsc_key_name, 2, 3) <> 'OLD'
		and binary substr(o2.rsc_key_name, 2, 3) <> 'WAS'
		and binary substr(o2.rsc_key_name, 2, 3) <> 'WEB'
		and substr(o2.rsc_key_name, 1, 1) <> '_'
		]]>
    </select>

</sqlMap>