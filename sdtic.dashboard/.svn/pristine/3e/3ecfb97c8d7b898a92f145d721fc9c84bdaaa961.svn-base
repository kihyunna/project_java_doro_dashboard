jQuery.support.cors=!0;var infra={control:{},layer:{},safelayer:{},interaction:{},overlay:{},render:{},util:{},math:{},style:{},dom:{},sphere:{},View:{},search:{},console:{}};infra.console.info=function(a){"undefined"!=typeof console&&console.info(a)};infra.console.error=function(a){"undefined"!=typeof console&&console.error(a)};infra.sphere.WGS84=new ol.Sphere(6378137);infra.isDef=function(a){return void 0!==a};
infra.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.base=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};infra.isNull=function(a){return null===a};
infra.bind=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}};infra.math.Coordinate=function(a,b){this.x=infra.isDef(a)?a:0;this.y=infra.isDef(b)?b:0};infra.math.modulo=function(a,b){var c=a%b;return 0>c*b?c+b:c};
infra.math.angle=function(a,b,c,d){return infra.math.modulo(180*Math.atan2(d-b,c-a)/Math.PI,360)};infra.math.toRadians=function(a){return a*Math.PI/180};infra.math.toDegrees=function(a){return 180*a/Math.PI};infra.util.createDom=function(a,b){var c=document.createElement(a);c.className=b["class"];return c};infra.dom.getOwnerDocument=function(a){return 9==a.nodeType?a:a.ownerDocument||a.document};
infra.style.getComputedStyle=function(a,b){var c=infra.dom.getOwnerDocument(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""};infra.style.getStyle_=function(a,b){return infra.style.getComputedStyle(a,b)||"absolute"};infra.style.getClientViewportElement=function(a){return(a?infra.dom.getOwnerDocument(a):document).documentElement};
infra.style.getBoundingClientRect_=function(a){try{var b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}0<window.navigator.userAgent.indexOf("MSIE ")&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b};
infra.style.getPageOffset=function(a){var b=infra.dom.getOwnerDocument(a);infra.style.getStyle_(a,"position");var c=new infra.math.Coordinate(0,0);b=infra.style.getClientViewportElement(b);if(a==b)return c;a=infra.style.getBoundingClientRect_(a);c.x=a.left+0;c.y=a.top+0;return c};
infra.MapGuideSimpleSelectionObject=function(a){this.aLayers=[];this.nLayers=0;try{var b=a.FeatureInformation.FeatureSet[0].Layer;if(null!=b)for(var c=0;c<b.length;c++){var d=b[c].Class[0],e=new infra.MapGuideSimpleSelectionObject.Layer(b[c]["@id"][0],b[c].Class[0]["@id"][0]);this.addLayer(e);for(var f=a.FeatureInformation.SelectedFeatures[0].SelectedLayer[c].Feature,h=d.ID,p=0;p<h.length;p++){for(var m=0;m<f[p].Bounds.length;m++)f[p].Bounds[m]*=1;e.addFeature(h[p],f[p].Property,f[p].Bounds)}}}catch(t){alert(t.message)}};
infra.MapGuideSimpleSelectionObject.prototype.addLayer=function(a){this.aLayers[this.nLayers]=a;this.nLayers++};infra.MapGuideSimpleSelectionObject.prototype.getNumLayers=function(){return this.nLayers};infra.MapGuideSimpleSelectionObject.prototype.getLayerByName=function(a){for(var b=null,c=0;c<this.nLayers;c++)if(this.aLayers[c].getName()==a){b=this.aLayers[c];break}return b};infra.MapGuideSimpleSelectionObject.prototype.getLayer=function(a){return 0<=a&&a<this.nLayers?this.aLayers[a]:null};
infra.MapGuideSimpleSelectionObject.prototype.getSelectionXml=function(){var a="";if(0<this.nLayers){a='<?xml version="1.0" encoding="UTF-8"?>\n<FeatureSet>\n';for(var b=0;b<this.nLayers;b++){var c=this.aLayers[b];a+='<Layer id="'+c.getName()+'">\n';a+='<Class id="'+c.getClassName()+'">\n';for(var d=0;d<c.getNumFeatures();d++)a+="<ID>"+c.featIds[d]+"</ID>\n";a+="</Class>\n</Layer>\n"}a+="</FeatureSet>\n"}return a};
infra.MapGuideSimpleSelectionObject.prototype.merge=function(a){if(null!=a&&0<a.nLayers)for(var b=0;b<a.nLayers;b++){var c=a.aLayers[b],d=this.getLayerByName(c.getName());if(null!=d){for(var e=0;e<c.getNumFeatures();e++){var f=d.featIds.find(c.featIds[e]);null==f?d.addFeature(c.featIds[e],c.properties[e],c.bounds[e]):d.removeFeatures(f)}0==d.featIds.length&&this.clear()}else{d=new infra.MapGuideSimpleSelectionObject.Layer(c.getName(),c.getClassName());for(f=0;f<c.getNumFeatures();f++)d.addFeature(c.featIds[f],
c.properties[e],c.bounds[e]);this.addLayer(d)}}};infra.MapGuideSimpleSelectionObject.prototype.clear=function(){this.aLayers=[];this.nLayers=0};infra.MapGuideSimpleSelectionObject.Layer=function(a,b){this.name=a;this.className=b;this.nFeatures=0;this.featIds=[];this.properties=[];this.bounds=[]};infra.MapGuideSimpleSelectionObject.Layer.prototype.addFeature=function(a,b,c){this.featIds[this.nFeatures]=a;this.properties[this.nFeatures]=b;this.bounds[this.nFeatures]=c;this.nFeatures++};
infra.MapGuideSimpleSelectionObject.Layer.prototype.getName=function(){return this.name};infra.MapGuideSimpleSelectionObject.Layer.prototype.getClassName=function(){return this.className};infra.MapGuideSimpleSelectionObject.Layer.prototype.getNumFeatures=function(){return this.nFeatures};infra.MapGuideSimpleSelectionObject.Layer.prototype.removeFeatures=function(a){for(var b=a.length,c=0;c<b;c++)this.featIds.remove(a[c]),this.nFeatures--};
infra.layer.MapGuideTile=function(a){this.resolutions=infra.isDef(a.resolutions)?a.resolutions:{};this.extent=infra.isDef(a.extent)?a.extent:{};var b=infra.isDef(a.name)?a.name:"";this.userhttp=infra.isDef(a.userhttp)?a.userhttp:!1;this.format=a.format||"png";this.url=infra.isDef(a.url)?a.url:"";this.mapdefinition=infra.isDef(a.mapdefinition)?a.mapdefinition:"";this.basemaplayergroupname=infra.isDef(a.basemaplayergroupname)?a.basemaplayergroupname:"";ol.layer.Tile.call(this,{name:b,source:new ol.source.TileImage({tileGrid:this.createGrid_(this.extent,
this.resolutions),projection:ol.proj.get("EPSG:3857"),tileUrlFunction:this.createUrl_.bind(this),wrapX:!1}),visible:!0,minResolution:.07464553543474244,maxResolution:40})};infra.inherits(infra.layer.MapGuideTile,ol.layer.Tile);infra.layer.MapGuideTile.prototype.createGrid_=function(a,b){return new ol.tilegrid.TileGrid({origin:ol.extent.getTopLeft(a),resolutions:b,tileSize:[300,300]})};
infra.layer.MapGuideTile.prototype.createUrl_=function(a){var b=this.url;if(this.userhttp)return this.getHttpTilePath(a);b=b+"/mapserver2016/mapagent.fcgi?USERNAME=Anonymous&mapdefinition="+encodeURIComponent(this.mapdefinition)+"&basemaplayergroupname="+this.basemaplayergroupname+"&operation=GETTILEIMAGE&version=1.2.0&tilecol={x}&tilerow={y}&scaleindex={z}";return b.replace("{z}",(this.resolutions.length-1-a[0]).toString()).replace("{x}",a[1].toString()).replace("{y}",(-a[2]-1).toString())};
infra.layer.MapGuideTile.prototype.getHttpTilePath=function(a){var b="",c="";0>a.y&&(b="-");b=0==a.y?b+"0":b+30*Math.floor(Math.abs((-a[2]-1)/30));0>a.x&&(c="-");c=0==a.x?c+"0":c+30*Math.floor(Math.abs(a[1]/30));return this.url+("/S"+Math.floor(this.resolutions.length-1-a[0])+"/"+this.basemaplayergroupname+"/R"+b+"/C"+c+"/"+(-a[2]-1)%30+"_"+a[1]%30+"."+this.format)};
infra.control.Measure=function(a){this.name="infra.control.Measure";a=infra.isDef(a)?a:{};this.className=infra.isDef(a.className)?a.className:"infra-measure";var b=infra.isDef(a.element)?a.element:infra.util.createDom("DIV",{"class":this.className+" ol-unselectable"});b.setAttribute("unselectable","on");var c=infra.isDef(a.tooltip)?a.tooltip:infra.util.createDom("DIV",{"class":this.className+"-tooltip ol-unselectable"});c.setAttribute("unselectable","on");this.onStart_=infra.isDef(a.start)?a.start:
null;this.onFinish_=infra.isDef(a.finish)?a.finish:null;this.onClear_=infra.isDef(a.clear)?a.clear:null;var d=infra.util.createDom("A",{"class":"distance"});d.href="#";var e=infra.util.createDom("A",{"class":"area"});e.href="#";var f=infra.util.createDom("A",{"class":"clear"});f.href="#";b.appendChild(c);b.appendChild(d);b.appendChild(e);b.appendChild(f);jQuery(b).on("mouseover",function(a){c.style.display="block"});jQuery(b).on("mouseout",function(a){c.style.display="none"});jQuery(d).on("focus",
function(a){this.blur()});jQuery(d).on("click",this.handleDistanceIconClick_.bind(this));jQuery(e).on("focus",function(a){this.blur()});jQuery(e).on("click",this.handleAreaIconClick_.bind(this));jQuery(f).on("focus",function(a){this.blur()});jQuery(f).on("click",this.handleClearIconClick_.bind(this));ol.control.Control.call(this,{element:b,target:null});this.downPx_=null;this.mode_="area";this.finishCoordinate_=null;this.isStarted_=!1;this.sketchPolygon_=this.sketchPolyline_=this.sketchPoint_=null;
this.pointFeatures_=new ol.Collection;this.groupId_=0;this.features=new ol.Collection;this.featureOverlay_=new ol.layer.Vector({source:new ol.source.Vector({features:this.features,cacheSize:128}),style:infra.isDef(a.style)?a.style:infra.control.Measure.getDefaultStyleFunction()});this.overlays_=new ol.Collection;this.movingOverlay_=null;this.overlays_.on("add",function(a){a.element.setMap(this.getMap())},this,!1);this.overlays_.on("remove",function(a){a.element.setMap(null)},this,!1);this.transformFn_=
ol.proj.getTransform("EPSG:3857","EPSG:4326")};infra.inherits(infra.control.Measure,ol.control.Control);
infra.control.Measure.getDefaultStyleFunction=function(){var a={};a.Point=[new ol.style.Style({image:new ol.style.Circle({radius:4,fill:new ol.style.Fill({color:[255,255,255,1]}),stroke:new ol.style.Stroke({color:[255,78,0,1],width:2})}),zIndex:1E5})];a.LineString=[new ol.style.Style({stroke:new ol.style.Stroke({color:[255,255,0,.9],width:4})})];a.Polygon=[new ol.style.Style({fill:new ol.style.Fill({color:[255,78,0,.3]}),stroke:new ol.style.Stroke({color:[255,78,0,.9],width:4})})];return function(b,
c){return a[b.getGeometry().getType()]}};infra.control.Measure.prototype.setMap=function(a){this.featureOverlay_.setMap(a);ol.control.Control.prototype.setMap.call(this,a)};infra.control.Measure.prototype.handleDistanceIconClick_=function(a){this.startMeasureDistance();a.preventDefault()};infra.control.Measure.prototype.handleAreaIconClick_=function(a){this.startMeasureArea();a.preventDefault()};
infra.control.Measure.prototype.handleClearIconClick_=function(a){this.clear();infra.isNull(this.onClear_)||this.onClear_.call(this,"clear");a.preventDefault()};infra.control.Measure.prototype.startMeasureDistance=function(){this.abortFeatures_();this.mode_="distance";this.listenViewportEvent_();infra.isNull(this.onStart_)||this.onStart_.call(this,this.mode_)};
infra.control.Measure.prototype.startMeasureArea=function(){this.abortFeatures_();this.mode_="area";this.listenViewportEvent_();infra.isNull(this.onStart_)||this.onStart_.call(this,this.mode_)};infra.control.Measure.prototype.clear=function(){this.abortFeatures_();this.clearFeatures_()};
infra.control.Measure.prototype.listenViewportEvent_=function(){var a=this.getMap();a.on("pointerdown",this.handlePointerDown_,this,!1);a.on("pointermove",this.handlePointerMove_,this,!1);a.on("pointerup",this.handlePointerUp_,this,!1)};infra.control.Measure.prototype.unlistenViewportEvent_=function(){var a=this.getMap();a.un("pointerdown",this.handlePointerDown_,this);a.un("pointermove",this.handlePointerMove_,this);a.un("pointerup",this.handlePointerUp_,this)};
infra.control.Measure.prototype.handlePointerDown_=function(a){if(0!=a.originalEvent.button)return!0;this.downPx_=a.pixel};infra.control.Measure.prototype.handlePointerMove_=function(a){infra.isNull(this.downPx_)&&this.updateSketchFeatures_(a);return!0};
infra.control.Measure.prototype.handlePointerUp_=function(a){if(2==a.originalEvent.button)return this.finishFeatures_(a),!0;if(0!=a.originalEvent.button||infra.isNull(this.downPx_))return!0;var b=this.downPx_,c=a.pixel,d=b[0]-c[0];b=b[1]-c[1];this.downPx_=null;0==d*d+b*b&&(this.isStarted_?0==a.originalEvent.button&&this.addToSketchFeatures_(a):(this.isStarted_=!0,this.startSketchFeatures_(a)));return!0};
infra.control.Measure.prototype.startSketchFeatures_=function(a){a=a.coordinate;var b=new ol.Feature(new ol.geom.Point(a.slice()));b.set("groupid",this.groupId_);"distance"==this.mode_?(this.sketchPolyline_=new ol.Feature(new ol.geom.LineString([a.slice(),a.slice()])),this.sketchPolyline_.set("groupid",this.groupId_),infra.isNull(this.movingOverlay_)?this.movingOverlay_=this.createMoveOverlay_(a):(this.addOverlay_(this.movingOverlay_),this.updateMoveOverlay_(a,"0m","0m"))):(this.sketchPolygon_=new ol.Feature(new ol.geom.Polygon([[a.slice(),
a.slice(),a.slice()]])),this.sketchPolygon_.set("groupid",this.groupId_));infra.isNull(b)||(this.pointFeatures_.push(b),this.featureOverlay_.getSource().addFeature(b));infra.isNull(this.sketchPolyline_)||(this.featureOverlay_.getSource().addFeature(this.sketchPolyline_),this.addStartOverlay_(a,"\uc2dc\uc791"));infra.isNull(this.sketchPolygon_)||this.featureOverlay_.getSource().addFeature(this.sketchPolygon_)};
infra.control.Measure.prototype.updateSketchFeatures_=function(a){a=a.coordinate;if(infra.isNull(this.sketchPoint_))this.sketchPoint_=new ol.Feature({geometry:new ol.geom.Point(a.slice())}),this.sketchPoint_.set("groupid",this.groupId_),this.featureOverlay_.getSource().addFeature(this.sketchPoint_);else{var b=this.sketchPoint_.getGeometry();b.setCoordinates(a.slice())}if(!infra.isNull(this.sketchPolygon_)){b=this.sketchPolygon_.getGeometry();var c=b.getCoordinates();var d=c[0].pop();var e=c[0][c[0].length-
1];e[0]=a[0];e[1]=a[1];c[0].push(d.slice());b.setCoordinates(c)}infra.isNull(this.sketchPolyline_)||(b=this.sketchPolyline_.getGeometry(),c=b.getCoordinates(),e=c[c.length-1],e[0]=a[0],e[1]=a[1],b.setCoordinates(c),c=this.getDistance_(c[c.length-2],c[c.length-1]),c=this.getDistanceString_(c),b=this.getGeometryDistance_(b),b=this.getDistanceString_(b),this.updateMoveOverlay_(a,c,b))};
infra.control.Measure.prototype.addToSketchFeatures_=function(a){a=a.coordinate;if(!infra.isNull(this.sketchPolygon_)){var b=this.sketchPolygon_.getGeometry();var c=b.getCoordinates();var d=c[0].pop(),e=c[0][c[0].length-1];e[0]=a[0];e[1]=a[1];c[0].push(d.slice());c[0].push(d.slice());b.setCoordinates(c)}infra.isNull(this.sketchPolyline_)||(b=this.sketchPolyline_.getGeometry(),c=b.getCoordinates(),c.pop(),c.push(a.slice()),c.push(a.slice()),b.setCoordinates(c),b=this.getDistance_(c[c.length-3],c[c.length-
2]),b=this.getDistanceString_(b),this.addSegmentOverlay_(a,b));a=new ol.Feature(new ol.geom.Point(a.slice()));a.set("groupid",this.groupId_);this.featureOverlay_.getSource().addFeature(a)};infra.control.Measure.prototype.getDistance_=function(a,b){a=this.transformFn_(a);b=this.transformFn_(b);return infra.sphere.WGS84.haversineDistance(a,b)};
infra.control.Measure.prototype.getGeometryDistance_=function(a){a=a.clone();a.applyTransform(this.transformFn_);a=a.getCoordinates();var b=0;i=0;for(length=a.length;i<length-1;i++)b+=infra.sphere.WGS84.haversineDistance(a[i],a[i+1]);return b};infra.control.Measure.prototype.getGeometryArea_=function(a){return a.getArea()};infra.control.Measure.prototype.getDistanceString_=function(a){var b="m";1E3<=a&&(b="\u339e",a/=1E3);a=Math.round(10*a)/10;return a+b};
infra.control.Measure.prototype.getAreaString_=function(a){var b="\u33a1";1E6<=a&&(b="\u33a2",a/=1E3);a=Math.round(10*a)/10;return a+b};
infra.control.Measure.prototype.finishFeatures_=function(a){if(!infra.isNull(this.sketchPolygon_)){geometry=this.sketchPolygon_.getGeometry();coordinates=geometry.getCoordinates();var b=coordinates[0].pop();coordinates[0].pop();coordinates[0].push(b.slice());if(3<coordinates[0].length){geometry.setCoordinates(coordinates);b=this.getGeometryArea_(geometry);var c=this.getAreaString_(b);this.addAreaOverlay_(coordinates[0][coordinates[0].length-2],"\ucd1d\uba74\uc801 : "+c);this.addCloseOverlay_(coordinates[0][coordinates[0].length-
2]);this.onFinish_.call(this,"area",b)}else this.abortFeatures_(a)}infra.isNull(this.sketchPolyline_)||(a=a.coordinate,geometry=this.sketchPolyline_.getGeometry(),coordinates=geometry.getCoordinates(),coordinates.pop(),coordinates.push(a.slice()),coordinates.push(a.slice()),geometry.setCoordinates(coordinates),a=this.getDistance_(coordinates[coordinates.length-3],coordinates[coordinates.length-2]),a=this.getDistanceString_(a),b=this.getGeometryDistance_(geometry),c=this.getDistanceString_(b),c=a+
"<br />\ucd1d\uac70\ub9ac : "+c,this.removeOverlay_(this.overlays_.getArray(this.overlays_.getLength()-1)),this.addTotalOverlay_(coordinates[coordinates.length-1],c),this.addCloseOverlay_(coordinates[coordinates.length-1]),infra.isNull(this.onFinish_)||this.onFinish_.call(this,"distance",b));infra.isNull(this.sketchPoint_)||this.featureOverlay_.getSource().removeFeature(this.sketchPoint_);this.isStarted_=!1;this.sketchPolygon_=this.sketchPolyline_=this.sketchPoint_=null;this.unlistenViewportEvent_();
this.removeOverlay_(this.movingOverlay_);this.groupId_++};infra.control.Measure.prototype.abortFeatures_=function(a){this.removeGroup_(this.groupId_);this.isStarted_=!1;this.sketchPolygon_=this.sketchPolyline_=this.sketchPoint_=null;this.unlistenViewportEvent_();this.removeOverlay_(this.movingOverlay_)};infra.control.Measure.prototype.clearFeatures_=function(){this.featureOverlay_.getSource().clear(!0);this.clearOverlay_()};
infra.control.Measure.prototype.removeGroup_=function(a){this.removeFeaturesByGroupId_(a);this.removeOverlaysByGroupId_(a)};infra.control.Measure.prototype.removeFeaturesByGroupId_=function(a){var b=this.featureOverlay_.getSource().getFeatures();if(0<b.length)for(var c=b.length-1;0<=c;c--){var d=b[c];d.get("groupid")==a&&this.featureOverlay_.getSource().removeFeature(d)}};infra.control.Measure.prototype.addOverlay_=function(a){this.overlays_.push(a)};
infra.control.Measure.prototype.removeOverlay_=function(a){if(infra.isDef(this.overlays_.remove(a)))return a};infra.control.Measure.prototype.clearOverlay_=function(){this.overlays_.clear()};infra.control.Measure.prototype.removeOverlaysByGroupId_=function(a){for(i=this.overlays_.getLength()-1;0<=i;i--)this.overlays_.getArray()[i].get("groupid")==a&&this.removeOverlay_(this.overlays_.getArray()[i])};
infra.control.Measure.prototype.addStartOverlay_=function(a,b){var c=infra.util.createDom("DIV",{"class":this.className+"-segment ol-unselectable"});c.setAttribute("unselectable","on");c.innerHTML=b;c=new ol.Overlay({position:a,positioning:"top-left",element:c,stopEvent:!1});c.set("groupid",this.groupId_);this.addOverlay_(c)};
infra.control.Measure.prototype.addSegmentOverlay_=function(a,b){var c=infra.util.createDom("DIV",{"class":this.className+"-segment ol-unselectable"});c.setAttribute("unselectable","on");c.innerHTML=b;c=new ol.Overlay({position:a,positioning:"top-left",element:c,stopEvent:!1});c.set("groupid",this.groupId_);this.addOverlay_(c)};
infra.control.Measure.prototype.addTotalOverlay_=function(a,b){var c=infra.util.createDom("DIV",{"class":this.className+"-total ol-unselectable"});c.setAttribute("unselectable","on");c.innerHTML=b;c=new ol.Overlay({position:a,positioning:"top-left",element:c,stopEvent:!1});c.set("groupid",this.groupId_);this.addOverlay_(c)};
infra.control.Measure.prototype.addCloseOverlay_=function(a){var b=infra.util.createDom("DIV",{"class":this.className+"-close ol-unselectable"});b.setAttribute("unselectable","on");b.innerHTML="";var c=infra.util.createDom("A",{"class":"ol-unselectable"});c.setAttribute("unselectable","on");c.href="#";b.appendChild(c);a=new ol.Overlay({position:a,positioning:"center-left",element:b,stopEvent:!0});a.set("groupid",this.groupId_);this.addOverlay_(a);var d=this.groupId_;jQuery(c).on("click",function(a){this.removeGroup_(d);
a.preventDefault()}.bind(this))};infra.control.Measure.prototype.createMoveOverlay_=function(a){var b=infra.util.createDom("DIV",{"class":this.className+"-move ol-unselectable"});b.setAttribute("unselectable","on");b.innerHTML="\uac70  \ub9ac : 0m<br/>\ucd1d\uac70\ub9ac : 0m";a=new ol.Overlay({position:a,positioning:"top-left",element:b,stopEvent:!1});a.set("groupid",this.groupId_);this.addOverlay_(a);return a};
infra.control.Measure.prototype.updateMoveOverlay_=function(a,b,c){this.movingOverlay_.setPosition(a);this.movingOverlay_.getElement().innerHTML="\uac70  \ub9ac : "+b+"<br/>\ucd1d\uac70\ub9ac : "+c+""};
infra.control.Measure.prototype.addAreaOverlay_=function(a,b){var c=infra.util.createDom("DIV",{"class":this.className+"-area ol-unselectable"});c.setAttribute("unselectable","on");c.innerHTML=b;c=new ol.Overlay({position:a,positioning:"top-left",element:c,stopEvent:!1});c.set("groupid",this.groupId_);this.addOverlay_(c)};
infra.control.ViewRotate=function(a){this.name="infra.control.ViewRotate";infra.isDef(a);this.className="infra-view-rotate";a=infra.util.createDom("DIV",{"class":this.className+" ol-unselectable"});a.setAttribute("unselectable","on");a.setAttribute("dragable","true");this.dragger_=null;ol.control.Control.call(this,{element:a,target:null})};infra.inherits(infra.control.ViewRotate,ol.control.Control);infra.control.ViewRotate.prototype.show=function(){jQuery(this.element).show()};
infra.control.ViewRotate.prototype.hide=function(){jQuery(this.element).hide()};
infra.control.ViewRotate.prototype.setMap=function(a){infra.isNull(this.dragger_)||(this.element.addEventListener("mousedown",this.handleRotateMouseDown_.bind(this)),this.dragger_.dispose(),this.dragger_=null);infra.isNull(this.getMap())||ol.events.unlisten(this.getMap().getView(),"change:rotation",this.handleViewRotationChange_,this);ol.control.Control.prototype.setMap.call(this,a);infra.isNull(a)||(this.element.addEventListener("mousedown",this.handleRotateMouseDown_.bind(this)),a.getView().on("change:rotation",
this.handleViewRotationChange_,this,!1))};infra.control.ViewRotate.prototype.handleRotateMouseDown_=function(a){var b=infra.style.getPageOffset(this.element),c=b.x+this.element.clientWidth/2;b=b.y+this.element.clientHeight/2;var d=a.clientX;a=a.clientY;10>Math.sqrt(Math.pow(d-c,2)+Math.pow(a-b,2))?this.getMap().getView().setRotation(0):this.setViewRotation_(c,b,d,a);jQuery(window).on("mousemove.draggable",infra.control.ViewRotate.prototype.handleRotateMouseDrag_.bind(this)).one("mouseup",function(){jQuery(window).off("mousemove.draggable")})};
infra.control.ViewRotate.prototype.handleRotateMouseDrag_=function(a){var b=infra.style.getPageOffset(this.element);this.setViewRotation_(b.x+this.element.clientWidth/2,b.y+this.element.clientHeight/2,a.clientX,a.clientY)};infra.control.ViewRotate.prototype.setViewRotation_=function(a,b,c,d){a=infra.math.angle(a,b,c,d)+90;a=infra.math.toRadians(a);this.getMap().getView().setRotation(a)};
infra.control.ViewRotate.prototype.setDirection_=function(a){a=(a+11.25)%360;a=Math.floor((0>a?a+360:a)/22.5);a=10>a?"0"+a:""+a;var b=jQuery(this.element).attr("class").split(" ");b[b.length-1]="v"+a;jQuery(this.element).attr("class",b.join(" "))};infra.control.ViewRotate.prototype.handleViewRotationChange_=function(a){a=infra.math.toDegrees(a.target.getRotation());this.setDirection_(a)};
infra.interaction.defaults=function(a){a=infra.isDef(a)?a:{};var b=new ol.Collection,c=new ol.Kinetic(-.005,.05,0);(infra.isDef(a.altShiftDragRotate)?a.altShiftDragRotate:1)&&b.push(new ol.interaction.DragRotate);(infra.isDef(a.doubleClickZoom)?a.doubleClickZoom:1)&&b.push(new ol.interaction.DoubleClickZoom({delta:a.zoomDelta,duration:a.zoomDuration}));(infra.isDef(a.dragPan)?a.dragPan:1)&&b.push(new ol.interaction.DragPan({kinetic:c,condition:function(a){a=a.originalEvent;return!a.altKey&&!a.platformModifierKey&&
!a.shiftKey&&1!=a.button&&2!=a.button}}));(infra.isDef(a.pinchRotate)?a.pinchRotate:1)&&b.push(new ol.interaction.PinchRotate);(infra.isDef(a.pinchZoom)?a.pinchZoom:1)&&b.push(new ol.interaction.PinchZoom({duration:a.zoomDuration}));if(infra.isDef(a.keyboard)?a.keyboard:1)b.push(new ol.interaction.KeyboardPan),b.push(new ol.interaction.KeyboardZoom({delta:a.zoomDelta,duration:a.zoomDuration}));(infra.isDef(a.mouseWheelZoom)?a.mouseWheelZoom:1)&&b.push(new ol.interaction.MouseWheelZoom({duration:a.zoomDuration}));
(infra.isDef(a.shiftDragZoom)?a.shiftDragZoom:1)&&b.push(new ol.interaction.DragZoom);return b};
infra.interaction.getDeFaultStyle=function(a,b){var c={type:"Point",geometryFunction:null,maxPoints:Infinity,textStyle:null};"None"!==a&&("RegularPolygon"===a?(c.type="Circle",c.geometryFunction=ol.interaction.Draw.createRegularPolygon(5)):"Box"===a?(c.type="LineString",c.maxPoints=2,c.geometryFunction=function(a,b){b||(b=new ol.geom.Polygon(null));var c=a[0],d=a[1];b.setCoordinates([[c,[c[0],d[1]],d,[d[0],c[1]],c]]);return b}):"Text"==a?(c.type="Point",c.textStyle=new ol.style.Style({text:new ol.style.Text({textAlign:"left",
textBaseline:"top",font:"bold 10pt \uad74\ub9bc",text:b,fill:new ol.style.Fill({color:[0,0,0,1]}),stroke:new ol.style.Stroke({color:[255,255,255,.8],width:4}),offsetX:0,offsetY:0,rotation:0}),zIndex:1E5})):c.type=a);return c};infra.interaction.Draw=function(a){ol.interaction.Draw.call(this,a);this.map=infra.isDef(a.map)?a.map:null;this.map.on("singleclick",function(a){coordinate=a.coordinate;this.dispatchEvent(new ol.events.Event("singleclick",coordinate))});this.map.addInteraction(this)};
infra.inherits(infra.interaction.Draw,ol.interaction.Draw);
infra.layer.MapGuideMap=function(a){a=a||{};var b=a.name||"mapguidemap";this.optionVisible_=infra.isDef(a.visible)?a.visible:!0;this.projection=infra.isDef(a.projection)?a.projection:"EPSG:3857";this.session=infra.isDef(a.session)?a.session:"";this.mapName=infra.isDef(a.mapName)?a.mapName:"";this.mapDefinition=infra.isDef(a.mapDefinition)?a.mapDefinition:"";this.handleMapLoaded=infra.isDef(a.onMapLoaded)?a.onMapLoaded:function(){};this.serverPath=infra.isDef(a.serverPath)?a.serverPath:"";this.mapCommandUrl=
infra.isDef(a.mapCommandUrl)?a.mapCommandUrl:"";this.keepSession=infra.isDef(a.keepSession)?a.keepSession:!0;this.selectionColor=infra.isDef(a.selectionColor)?a.selectionColor:"0x0100FFFF";this.behavior=infra.isDef(a.behavior)?a.behavior:7;this.ratio=infra.isDef(a.ratio)?a.ratio:1;2016===(a.serverVersion||2016)?(this.createRuntimeVersion="3.0.0",this.updateMapFeaturesVersion=this.queryMapFeaturesVersion="2.6.0"):(this.queryMapFeaturesVersion=this.createRuntimeVersion="2.6.0",this.updateMapFeaturesVersion=
"aims2015");this.selection_=null;"/"!=this.serverPath[this.serverPath.length-1]&&(this.serverPath+="/");this.agentUrl_=this.serverPath+"mapagent/mapagent.fcgi?";this.loadedMapInfo=null;this.groups=[];this.layers=[];ol.layer.Image.call(this,{name:b,source:new ol.source.ImageMapGuide({extent:[0,0,0,0],projection:this.projection,url:this.agentUrl_,useOverlay:!0,metersPerUnit:1,params:{mapName:this.session,session:this.mapName,format:a.format||"PNG",behavior:this.behavior,SELECTIONCOLOR:this.selectionColor},
ratio:this.ratio,cacheSize:128}),visible:!1});""==this.session?this.createSession():this.loadMap();this.autoRefreshInterval_=infra.isDef(a.autoRefreshInterval)?a.autoRefreshInterval:0};infra.inherits(infra.layer.MapGuideMap,ol.layer.Image);infra.layer.MapGuideMap.prototype.refreshTimerTick_=function(a){this.refresh()};
infra.layer.MapGuideMap.prototype.createSession=function(){jQuery.ajax({type:"get",url:this.serverPath+"fusion/layers/MapGuide/php/CreateSession.php",dataType:"json",async:!0,cache:!1,success:infra.bind(this.handleCreateSession_,this),error:function(a,b,c){alert("CreateSession Error : \n\n"+a.responseText)}})};infra.layer.MapGuideMap.prototype.handleCreateSession_=function(a){infra.console.info("createSession success : "+this.get("name"));this.session=a.sessionId;this.createRuntime()};
infra.layer.MapGuideMap.prototype.createRuntime=function(){jQuery.ajax({type:"get",url:this.agentUrl_,dataType:"json",async:!0,cache:!1,data:{version:this.createRuntimeVersion,locale:"en",clientagent:"Fusion Viewer",operation:"CREATERUNTIMEMAP",mapdefinition:this.mapDefinition,requestedfeatures:7,iconsperscalerange:25,format:"application/json",targetMapName:this.mapName,iconFormat:"GIF",session:this.session},success:infra.bind(this.handlecreateRuntime_,this),error:function(a){alert("LoadMap Error : \n\n"+
a.responseText)}})};
infra.layer.MapGuideMap.prototype.handlecreateRuntime_=function(a){this.loadedMapInfo=a.RuntimeMap;this.mapName=this.loadedMapInfo.Name[0];var b=[1*this.loadedMapInfo.Extents[0].LowerLeftCoordinate[0].X[0],1*this.loadedMapInfo.Extents[0].LowerLeftCoordinate[0].Y[0],1*this.loadedMapInfo.Extents[0].UpperRightCoordinate[0].X[0],1*this.loadedMapInfo.Extents[0].UpperRightCoordinate[0].Y[0]];this.getSource().updateParams({session:this.session,mapName:this.mapName});this.setExtent(b);this.optionVisible_&&
this.setVisible(!0);this.autoRefreshInterval_&&window.setInterval(infra.bind(this.refreshTimerTick_,this),this.autoRefreshInterval_);this.keepSession&&this.getSessionTimeout_();this.updateLayers_(a.RuntimeMap);this.handleMapLoaded(this.loadedMapInfo)};infra.layer.MapGuideMap.prototype.updateLayers_=function(a){this.groups=a.Group;this.layers=a.Layer};
infra.layer.MapGuideMap.prototype.getSessionTimeout_=function(){jQuery.ajax({type:"get",url:this.agentUrl_,dataType:"text",async:!0,cache:!1,data:{operation:"GETSESSIONTIMEOUT",session:this.session,version:"1.0.0"},success:infra.bind(this.handleGetSessionTimeout_,this),error:function(a){alert("getSessionTimeout_ Error : \n\n"+a.responseText)}})};
infra.layer.MapGuideMap.prototype.handleGetSessionTimeout_=function(a){this.keepSession&&(a=1E3*parseFloat(a),setTimeout(infra.bind(this.getSessionTimeout_,this),a),infra.console.info("keepSession : "+a))};
infra.layer.MapGuideMap.prototype.queryMapFeatures=function(a,b,c,d){var e=infra.isDef(a.layers)?a.layers:"",f=infra.isDef(a.geometry)?a.geometry:"",h=infra.isDef(a.layerAttributeFilter)?a.layerAttributeFilter:"3",p=infra.isDef(a.maxFeatures)?a.maxFeatures:"1",m=infra.isDef(a.persist)?a.persist:"1";c=infra.isDef(c)?c:!1;d=infra.isDef(d)?d:!0;a=infra.isDef(a.featureFilter)?a.featureFilter:"";jQuery.ajax({type:"post",url:this.agentUrl_,data:{locale:"en",operation:"QUERYMAPFEATURES",version:this.queryMapFeaturesVersion,
persist:m,mapname:this.mapName,session:this.session,LAYERNAMES:e,geometry:f,selectionVariant:"INTERSECTS",maxFeatures:p,layerAttributeFilter:h,requestData:"1",selectionColor:"0x0000FFA0",format:"application/json",clientagent:"Ajax Viewer",featureFilter:a},dataType:"json",async:!0,cache:!1,success:infra.bind(this.processQueryMapFeatures_,this,[b,c,d]),error:function(a){alert("queryMapFeatures Error : \n\n"+a.responseText)}})};
infra.layer.MapGuideMap.prototype.processQueryMapFeatures_=function(a,b){var c=a[0],d=a[1],e=a[2],f=new infra.MapGuideSimpleSelectionObject(b);if(!e)return c.call(this,f),f;d&&f.merge(this.selection_);this.selection_=f;e=f.getSelectionXml();""!=e&&null!=e?this.updateMapSelection(e,!1,d,c):(0==d&&this.clearSelection(),c.call(this,this.selection_))};
infra.layer.MapGuideMap.prototype.simpleQuery=function(a,b){var c=infra.isDef(a.layers)?a.layers:"",d=infra.isDef(a.geometry)?a.geometry:"",e=infra.isDef(a.layerAttributeFilter)?a.layerAttributeFilter:"3",f=infra.isDef(a.maxFeatures)?a.maxFeatures:"1",h=infra.isDef(a.persist)?a.persist:"1",p=infra.isDef(p)?p:!1,m=infra.isDef(m)?m:!0;p=infra.isDef(a.featureFilter)?a.featureFilter:"";jQuery.ajax({type:"post",url:this.agentUrl_,data:{locale:"en",operation:"QUERYMAPFEATURES",version:this.queryMapFeaturesVersion,
persist:h,mapname:this.mapName,session:this.session,LAYERNAMES:c,geometry:d,selectionVariant:"INTERSECTS",maxFeatures:f,layerAttributeFilter:e,requestData:"1",selectionColor:"0x0000FFA0",format:"application/json",clientagent:"ol-infra",featureFilter:p},dataType:"json",async:!0,cache:!1,success:infra.bind(this.processSimpleQuery_,this,[b]),error:function(a){alert("simpleQuery Error : \n\n"+a.responseText)}})};
infra.layer.MapGuideMap.prototype.processSimpleQuery_=function(a,b){var c=a[0],d=new infra.MapGuideSimpleSelectionObject(b);c.call(this,d)};
infra.layer.MapGuideMap.prototype.updateMapSelection=function(a,b,c,d,e){"aims2015"!==this.updateMapFeaturesVersion?(b=4,1==e&&(b|=1),jQuery.ajax({type:"post",url:this.agentUrl_,data:{operation:"QUERYMAPFEATURES",format:"application/json",version:this.queryMapFeaturesVersion,session:this.session,mapname:this.mapName,geometry:null,maxFeatures:-1,persist:1,selectionVariant:"INTERSECTS",featureFilter:a,layerNames:null,layerAttributeFilter:0,requestData:b,selectionColor:"0x0000FFA0"},dataType:"json",
async:!0,cache:!1,success:infra.bind(function(){this.refresh();d.call(this,this.selection_)},this),error:function(a){alert("updateMapSelection Error : \n\n"+a.responseText)}})):jQuery.ajax({type:"post",url:this.serverPath+"fusion/layers/MapGuide/php/SaveSelection.php",data:{mapname:this.mapName,session:this.session,selection:a,seq:Math.random(),getextents:b?"true":"false"},dataType:"text",async:!0,cache:!1,success:infra.bind(function(){this.refresh();d.call(this,this.selection_)},this),error:function(a,
b,c){alert("updateMapSelection Error : \n\n"+a.responseText)}})};infra.layer.MapGuideMap.prototype.clearSelection=function(){null!=this.selection_&&this.selection_.clear();this.clear_()};
infra.layer.MapGuideMap.prototype.clear_=function(){jQuery.ajax({type:"get",url:this.serverPath+"fusion/layers/MapGuide/php/ClearSelection.php",data:{mapname:this.mapName,session:this.session},dataType:"text",async:!0,cache:!1,success:infra.bind(function(a){this.refresh()},this),error:function(a,b,c){alert("clearSelection Error : \n\n"+a.responseText)}})};
infra.layer.MapGuideMap.prototype.getLayerById=function(a){for(var b=null,c=0;c<this.layers.length;c++)if(this.layers[c].ObjectId[0]==a){b=this.layers[c];break}return b};infra.layer.MapGuideMap.prototype.getLayerByName=function(a){for(var b=null,c=0;c<this.layers.length;c++)if(this.layers[c].Name==a){b=this.layers[c];break}return b};infra.layer.MapGuideMap.prototype.getGroupById=function(a){for(var b=null,c=0;c<this.groups.length;c++)if(this.groups[c].ObjectId==a){b=this.groups[c];break}return b};
infra.layer.MapGuideMap.prototype.getGroupByName=function(a){for(var b=null,c=0;c<this.groups.length;c++)if(this.groups[c].Name==a){b=this.groups[c];break}return b};
infra.layer.MapGuideMap.prototype.setLayerVisible=function(a,b){var c=[],d=[],e={SHOWLAYERS:"",HIDELAYERS:"",SHOWGROUPS:"",HIDEGROUPS:""};"string"==typeof a&&(a=a.split(","));for(var f=0;f<a.length;f++){var h=this.getLayerByName(a[f]);null!=h&&c.push(h.ObjectId[0])}if("boolean"==typeof b)b?(e.SHOWLAYERS=c.join(","),e.HIDELAYERS=""):(e.SHOWLAYERS="",e.HIDELAYERS=c.join(","));else{"string"==typeof b&&(b=b.split(","));for(f=0;f<b.length;f++)h=this.getLayerByName(b[f]),null!=h&&d.push(h.ObjectId[0]);
e.SHOWLAYERS=c.join(",");e.HIDELAYERS=d.join(",")}this.getSource().updateParams(e)};
infra.layer.MapGuideMap.prototype.setGroupVisible=function(a,b){var c=[],d=[],e={SHOWLAYERS:"",HIDELAYERS:"",SHOWGROUPS:"",HIDEGROUPS:""};"string"==typeof a&&(a=a.split(","));for(var f=0;f<a.length;f++){var h=this.getGroupByName(a[f]);null!=h&&c.push(h.ObjectId)}if("boolean"==typeof b)b?(e.SHOWGROUPS=c.join(","),e.HIDEGROUPS=""):(e.SHOWGROUPS="",e.HIDEGROUPS=c.join(","));else{"string"==typeof b&&(b=b.split(","));for(f=0;f<b.length;f++)h=this.getLayerByName(b[f]),null!=h&&d.push(h.ObjectId[0]);e.SHOWGROUPS=
c.join(",");e.HIDEGROUPS=d.join(",")}this.getSource().updateParams(e)};infra.layer.MapGuideMap.prototype.refresh=function(){this.getSource().updateParams({_:(new Date).getTime()})};infra.layer.MapGuideMap.prototype.updateParams=function(a){this.getSource().updateParams(a)};
infra.layer.MapGuideMap.prototype.setLayerFilter=function(a,b,c){jQuery.ajax({type:"get",url:this.mapCommandUrl,dataType:"text",data:{operation:"SetFilterForLayer",SESSION:this.session,MAPNAME:this.mapName,LAYERNAME:a,FILTER:b},async:!0,cache:!1,success:infra.bind(this.handleSetLayerFilter_,this,a,c),error:function(a,b,c){alert("SetLayerFilter Error : \n\n"+a.responseText)}})};
infra.layer.MapGuideMap.prototype.handleSetLayerFilter_=function(a,b,c){this.getLayerByName(a).uniqueId=c;this.refresh();"undefined"!==typeof b&&b.call(this,a)};infra.layer.MapGuideMap.prototype.setRatio=function(a){this.getSource().setRatio(a)};infra.layer.MapGuideMap.prototype.getSession=function(){return this.session};infra.layer.MapGuideMap.prototype.getSelection=function(){return this.selection_};
infra.layer.MapGuideMap.prototype.queryLayerFeatures=function(a,b){var c=a?a:{};jQuery.ajax({type:"post",url:this.appUrl,dataType:"text",data:{OPERATION:"QueryLayerFeatures",SESSION:this.session,MAPNAME:this.mapName,LAYERNAME:void 0!==c.layerName?c.layerName:"",FILTER:void 0!==c.filter?c.filter:"",PROPERTIES:void 0!==c.properties?c.properties:"",SPATIALOPERATION:void 0!==c.operation?c.operation:"4",GEOMETRY:void 0!==c.geometry?c.geometry:""},async:!0,cache:!1,success:b,error:function(a,b,c){alert("QueryLayerFeatures Error : \n\n"+
a.responseText)}})};infra.layer.Radar=function(a){a=a||{};var b=a.name||"radar",c=infra.isDef(a.visible)?a.visible:!0,d=infra.isDef(a.url)?a.url:"",e=[1.3264975988072015E7,3564136.900765577,1.5104441895953653E7,4923013.372397552];e=infra.isDef(a.extent)?a.extent:e;infra.isDef(a.imageSize);this.extent=e;this.imageSize=this.imageSize;this.url=d;a=new ol.source.ImageStatic({url:this.url,imageSize:this.imageSize,imageExtent:this.extent,cacheSize:128});ol.layer.Image.call(this,{name:b,source:a,visible:c})};
infra.inherits(infra.layer.Radar,ol.layer.Image);infra.layer.Radar.prototype.setUrl=function(a){this.url=a;a=new ol.source.ImageStatic({url:this.url,imageSize:this.imageSize,imageExtent:this.extent,cacheSize:128});this.setSource(a)};infra.layer.VworldHybrid=function(a){a=a||{};a=infra.isDef(a.visible)?a.visible:!0;ol.layer.Tile.call(this,{name:"vworldHybrid",source:new ol.source.XYZ({url:"http://xdworld.vworld.kr:8080/2d/Hybrid/201612/{z}/{x}/{y}.png",maxZoom:18,minZoom:6,cacheSize:128}),visible:a})};
infra.inherits(infra.layer.VworldHybrid,ol.layer.Tile);
infra.layer.VworldJijuk=function(a){a=a||{};var b=infra.isDef(a.visible)?a.visible:!0;a=infra.isDef(a.apiKey)?a.apiKey:"";ol.layer.Tile.call(this,{name:"vworld.Jijuk",source:new ol.source.TileWMS({url:"http://map.vworld.kr/js/wms.do?",params:{LAYERS:"LP_PA_CBND_BUBUN,LP_PA_CBND_BONBUN",STYLES:"LP_PA_CBND_BUBUN,LP_PA_CBND_BONBUN",CRS:"EPSG:900913",TRANSPARENT:!0,APIKEY:a},extent:[1.382630417694704E7,3803966.69647353,1.456376862584242E7,4848402.250962178],tileLoadFunction:function(a,b){b=b.replace("EPSG%3A3857",
"EPSG%3A900913");a.getImage().src=b},cacheSize:128}),minResolution:.29858214173896974,maxResolution:2.388657133911758,visible:b})};infra.inherits(infra.layer.VworldJijuk,ol.layer.Tile);infra.layer.VworldSatellite=function(a){a=a||{};a=infra.isDef(a.visible)?a.visible:!0;ol.layer.Tile.call(this,{name:"vworldSatellite",source:new ol.source.XYZ({url:"http://xdworld.vworld.kr:8080/2d/Satellite/201612/{z}/{x}/{y}.jpeg",maxZoom:18,minZoom:6,cacheSize:128}),visible:a})};
infra.inherits(infra.layer.VworldSatellite,ol.layer.Tile);infra.layer.VworldBase=function(a){a=a||{};var b=infra.isDef(a.visible)?a.visible:!0;ol.layer.Tile.call(this,{name:a.name||"vworld.Base",source:new ol.source.XYZ({url:"http://xdworld.vworld.kr:8080/2d/Base/201612/{z}/{x}/{y}.png",maxZoom:18,minZoom:6,cacheSize:128}),visible:b})};infra.inherits(infra.layer.VworldBase,ol.layer.Tile);
infra.Map=function(a){a=a||{};var b=a.layers||[],c=[2445.98490512564,1222.99245256282,611.49622628141,305.748113140705,152.8740565703525,76.43702828517625,38.21851414258813,19.109257071294063,9.554628535647032,4.777314267823516,2.388657133911758,1.194328566955879,.5971642834779395,.29858214173896974],d=[2445.98490512564,1222.99245256282,611.49622628141,305.748113140705,152.8740565703525,76.43702828517625,38.21851414258813,19.109257071294063,9.554628535647032,4.777314267823516,2.388657133911758,1.194328566955879,
.5971642834779395,.29858214173896974];c=a.viewResolutions||c;var e=a.projection||ol.proj.get("EPSG:3857");d=a.viewExtent||d;var f=a.center||ol.proj.transform([127.68115234375,36.55768680665236],"EPSG:4326","EPSG:3857"),h=infra.isDef(a.zoom)?a.zoom:1,p=infra.isDef(a.target)?document.getElementById(a.target):null,m=infra.isDef(a.viewPointIndicator)?a.viewPointIndicator:!0,t=infra.isDef(a.pointColor)?a.pointColor:[103,153,255];a=infra.isDef(a.controls)?a.controls:[new ol.control.Zoom];ol.Map.call(this,
{target:p,renderer:"canvas",layers:b,ol3Logo:!1,controls:a,interactions:infra.interaction.defaults({doubleClickZoom:!1}),view:new ol.View({projection:e,extent:d,center:f,resolutions:c,zoom:h})});m&&this.getTargetElement().addEventListener("mouseup",infra.bind(this.handlePointerUp_,this,t))};infra.inherits(infra.Map,ol.Map);infra.Map.prototype.handlePointerUp_=function(a,b){new infra.render.PointIndicator({map:this,coordinate:this.getCoordinateFromPixel([b.offsetX,b.offsetY]),color:a})};
infra.Map.prototype.getLayer=function(a){var b=null;jQuery(this.getLayers().getArray()).each(function(c,d){if(a==d.get("name"))return b=d,!1});return b};
infra.MiniMap=function(a){a=a||{};var b=infra.isDef(a.controls)?a.controls:[],c=infra.isDef(a.session)?a.session:"",d=infra.isDef(a.keepSession)?a.keepSession:!0,e=infra.isDef(a.serverPath)?a.serverPath:"";c=[new infra.layer.MapGuideMap({name:"minimap_rims2014",serverpath:e,mapDefinition:"Library://WCM/Map/RIMS_2014_MAP.MapDefinition",autoRefreshInterval:18E4,session:c,keepSession:d,visible:!0})];d=infra.isDef(a.map)?a.map:null;this.polygonFeature_=this.map_=null;this.setMap(d);a=infra.isDef(a.target)?
document.getElementById(a.target):null;infra.Map.call(this,{name:"MINIMAP",target:a,renderer:"canvas",layers:c,ol3Logo:!1,controls:[],interactions:[],zoom:0,viewResolutions:[4891.96981025128]});this.getInteractions().clear();this.getControls().clear();b.forEach(function(a){this.addControl(a)},this);this.featureOverlay_=new ol.layer.Vector({style:new ol.style.Style({stroke:new ol.style.Stroke({color:[255,0,0,1],width:2})})});this.featureOverlay_.setMap(this)};infra.inherits(infra.MiniMap,infra.Map);
infra.MiniMap.prototype.setMap=function(a){this.unBindEvent_();infra.isNull(a)?this.map_=null:(this.map_=a,this.bindEvent_())};infra.MiniMap.prototype.bindEvent_=function(){ol.events.listen(this.map_,"moveend",this.handleMapMoveEnd,this,!1);ol.events.listen(this.map_.getView(),"change:resolution",this.handleViewResolutionchange,this,!1)};
infra.MiniMap.prototype.unBindEvent_=function(){infra.isNull(this.map_)||(ol.events.unlisten(this.map_,"moveend",this.handleMapMoveEnd,this),ol.events.unlisten(this.map_.getView(),"change:resolution",this.handleViewResolutionchange,this))};
infra.MiniMap.prototype.handleMapMoveEnd=function(a){a=a.map;a=a.getView().calculateExtent(a.getSize());var b=[];b[0]=[a[0],a[1]];b[1]=[a[0],a[3]];b[2]=[a[2],a[3]];b[3]=[a[2],a[1]];b[4]=[a[0],a[1]];infra.isNull(this.polygonFeature_)?(this.polygonFeature_=new ol.Feature(new ol.geom.Polygon([b])),this.featureOverlay_.getSource().addFeature(this.polygonFeature_)):this.polygonFeature_.getGeometry().setCoordinates([b])};infra.MiniMap.prototype.handleViewResolutionchange=function(a){};
infra.render.PointIndicator=function(a){var b=(new Date).getTime(),c=a.map,d=a.coordinate,e=a.color;var f=c.on("postcompose",function(a){var h=a.vectorContext,m=a.frameState;a=new ol.geom.Point(d);m=m.time-b;if(1E3<m)ol.Observable.unByKey(f);else{var t=m/1E3;m=10*ol.easing.easeOut(t)+5;t=ol.easing.easeOut(1-t);m=new ol.style.Style({image:new ol.style.Circle({radius:m,snapToPixel:!1,stroke:new ol.style.Stroke({color:"rgba("+e[0]+","+e[1]+","+e[2]+", "+t+")",width:.25+t})})});h.setStyle(m);h.drawGeometry(a);
c.render()}})};infra.overlay.Popup=function(a){a=infra.isDef(a)?a:{};this.className=infra.isDef(a.className)?a.className:"infra-popup";a=infra.util.createDom("DIV",{"class":this.className});a.setAttribute("unselectable","on");this.closer=infra.util.createDom("A",{"class":this.className+"-closer"});this.content=infra.util.createDom("DIV",{"class":this.className+"-content"});a.appendChild(this.closer);a.appendChild(this.content);ol.Overlay.call(this,{element:a,stopEvent:!0})};
infra.inherits(infra.overlay.Popup,ol.Overlay);infra.overlay.Popup.prototype.handleCloserClick=function(){this.setVisible(!1)};infra.overlay.Popup.prototype.setMap=function(a){if(infra.isNull(a))jQuery(this.closer).un("click",this.handleCloserClick.bind(this));else jQuery(this.closer).on("click",this.handleCloserClick.bind(this));ol.Overlay.prototype.setMap.call(this,a)};
infra.overlay.Popup.prototype.setVisible=function(a){a?this.getElement().style.display="block":this.getElement().style.display="none"};infra.overlay.Popup.prototype.clearContent=function(){for(;this.content.firstChild;)this.content.removeChild(this.content.firstChild)};infra.overlay.Popup.prototype.getContent=function(){return this.content};infra.overlay.Popup.prototype.appendChildToContent=function(a){this.content.appendChild(a);return this.content};
infra.overlay.Popup.prototype.appendNameValueToContent=function(a,b){var c=infra.util.createDom("UL",{"class":""}),d=infra.util.createDom("LI",{"class":"name"}),e=infra.util.createDom("LI",{"class":"value"});d.innerHTML=a;e.innerHTML=b;c.appendChild(d);c.appendChild(e);this.content.appendChild(c);return this.content};infra.overlay.Popup.prototype.setContentHtml=function(a){this.content.innerHTML=a};
infra.TyphoonDraw=function(a,b){this.layer=a;this.safelayer=b;this.circleStyle=new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 0, 0, 0.2)"}),stroke:new ol.style.Stroke({color:"#FF0000",width:2}),image:new ol.style.Circle({radius:3,fill:new ol.style.Fill({color:"#ff0000"})})});this.circleStyle1=new ol.style.Style({fill:new ol.style.Fill({color:"rgba(100, 0, 0, 0.2)"}),stroke:new ol.style.Stroke({color:"#FF1010",width:2}),image:new ol.style.Circle({radius:3,fill:new ol.style.Fill({color:"#ff0101"})})})};
infra.TyphoonDraw.prototype.getContactPoints=function(a,b,c){var d=[],e=Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2)),f=Math.PI/2-(Math.atan2(a[0]-b[0],a[1]-b[1])-Math.acos(c/e));a=2*Math.PI-(Math.atan2(a[0]-b[0],a[1]-b[1])+Math.acos(c/e))+Math.PI/2;d[0]=[1*b[0]+Math.cos(f)*c,1*b[1]+Math.sin(f)*c];d[1]=[1*b[0]+Math.cos(a)*c,1*b[1]+Math.sin(a)*c];return d};
infra.TyphoonDraw.prototype.getTopContactPoint=function(a,b,c,d){var e=[],f=Math.sqrt((a[0]-b[0])*(a[0]-b[0])+(a[1]-b[1])*(a[1]-b[1])),h=d*f/(d-c),p=Math.PI/2-(Math.atan2(a[0]-b[0],a[1]-b[1])-Math.acos(d/h));f=Math.PI/2-(Math.atan2(a[0]-b[0],a[1]-b[1])-Math.acos(c/(h-f)));e[0]=[a[0]+Math.cos(f)*c,a[1]+Math.sin(f)*c];e[1]=[b[0]+Math.cos(p)*d,b[1]+Math.sin(p)*d];return e};
infra.TyphoonDraw.prototype.getBottomContactPoint=function(a,b,c,d){var e=[],f=Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2)),h=d*f/(d-c),p=2*Math.PI-(Math.atan2(a[0]-b[0],a[1]-b[1])+Math.acos(d/h))+Math.PI/2;f=2*Math.PI-(Math.atan2(a[0]-b[0],a[1]-b[1])+Math.acos(c/(h-f)))+Math.PI/2;e[0]=[a[0]+Math.cos(f)*c,a[1]+Math.sin(f)*c];e[1]=[b[0]+Math.cos(p)*d,b[1]+Math.sin(p)*d];return e};
infra.TyphoonDraw.prototype.draw=function(a){this.data=a;for(var b=[],c=[],d=[],e=[],f=[],h=[],p=[],m=[],t=[],x="",y=[],u=[],l=0;l<a.length;l++){var r=new Proj4js.Point(a[l].typ_lon,a[l].typ_lat);Proj4js.transform(proj4326,proj900913,r);0>r.x&&(r.x*=-1);b[l]=[r.x,r.y];r=new ol.Feature({geometry:new ol.geom.Point(b[l])});r.typNo=a[l].typ_seq;r.typEn=a[l].typ_en;r.day="\ud604\uc7ac";r.typTime=a[l].typ_tm;r.lat=a[l].typ_lat;r.lon=a[l].typ_lon;r.ps=a[l].typ_ps;r.ws=a[l].typ_ws;r.loc=a[l].typ_loc;r.cur=
!0;r.setStyle(this.circleStyle);this.layer.getSource().addFeature(r);if(x!=a[l].typ_en){x=a[l].typ_en;u.push(l);for(var k=1;10>=k;k++)null!=a[l]["ft"+k+"_tm"]&&(d.push(a[l]["ft"+k+"_rad"]),e.push(a[l]["ft"+k+"_tm"]),f.push(a[l]["ft"+k+"_lat"]),h.push(a[l]["ft"+k+"_lon"]),p.push(a[l]["ft"+k+"_ps"]),m.push(a[l]["ft"+k+"_ws"]),t.push(a[l]["ft"+k+"_loc"]));for(k=0;k<d.length;k++)d[k]*=1E3;for(k=0;10>k;k++)if(null!=a[l]["ft"+(k+1)+"_tm"]){r=new Proj4js.Point(h[k],f[k]);Proj4js.transform(proj4326,proj900913,
r);r=[r.x,r.y];c.push(r);var v=new ol.Feature({geometry:new ol.geom.Circle(r,d[k])});v.typNo=a[l].typ_seq;v.typEn=a[l].typ_en;v.day=k+1;v.typTime=e[k];v.lat=f[k];v.lon=h[k];v.ps=p[k];v.ws=m[k];v.loc=t[k];v.setStyle(this.circleStyle);this.layer.getSource().addFeature(v);r=new ol.Feature({geometry:new ol.geom.Point(r)});r.typNo=a[l].typ_seq;r.typEn=a[l].typ_en;r.day=k+1;r.typTime=e[k];r.lat=f[k];r.lon=h[k];r.ps=p[k];r.ws=m[k];r.loc=t[k];r.setStyle(this.circleStyle);this.layer.getSource().addFeature(r)}}null!=
d[0]&&(k=this.getContactPoints(b[l],c[0],d[0]),k.splice(1,0,b[l]),k=new ol.Feature({geometry:new ol.geom.LineString(k),id:"contactLine"}),k.setStyle(this.circleStyle),this.layer.getSource().addFeature(k));for(k=1;k<d.length;k++)null!=d[k]&&0!=d[k]&&(e=this.getTopContactPoint(c[k-1],c[k],d[k-1],d[k]),e=new ol.Feature({geometry:new ol.geom.LineString(e),id:"contactLine"}),e.setStyle(this.circleStyle),this.layer.getSource().addFeature(e),e=this.getBottomContactPoint(c[k-1],c[k],d[k-1],d[k]),e=new ol.Feature({geometry:new ol.geom.LineString(e),
id:"contactLine"}),e.setStyle(this.circleStyle),this.layer.getSource().addFeature(e));c=[];d=[];e=[];f=[];h=[];p=[];m=[];t=[]}for(k=1;k<=u.length;k++)k==u.length?y.push(b.slice(u[k-1],a.length)):y.push(b.slice(u[k-1],u[k]));for(k=0;k<y.length;k++)b=new ol.Feature(new ol.geom.LineString(y[k])),b.typNo=a[u[k]].typ_seq,b.typEn=a[u[k]].typ_en,b.day="\ud604\uc7ac",b.typTime=a[u[k]].typ_tm,b.lat=a[u[k]].typ_lat,b.lon=a[u[k]].typ_lon,b.ps=a[u[k]].typ_ps,b.ws=a[u[k]].typ_ws,b.loc=a[u[k]].typ_loc,b.cur=!0,
b.setStyle(this.circleStyle),this.layer.getSource().addFeature(b)};infra.util.createPolygonWKTWithPixel=function(a,b,c){var d=a.getCoordinateFromPixel([b[0]-c,b[1]-c]),e=a.getCoordinateFromPixel([b[0]+c,b[1]-c]),f=a.getCoordinateFromPixel([b[0]+c,b[1]+c]);a=a.getCoordinateFromPixel([b[0]-c,b[1]+c]);d=(""+d).replace(","," ");e=(""+e).replace(","," ");f=(""+f).replace(","," ");a=(""+a).replace(","," ");return"POLYGON(("+d+", "+e+", "+f+", "+a+", "+d+"))"};infra.util.tick=function(){return(new Date).getTime()};
infra.View.getResolutionForExtent=function(a,b){var c=ol.extent.getWidth(a)/b[0],d=ol.extent.getHeight(a)/b[1];return Math.max(c,d)};infra.util.autoFormat=function(a){if("number"==typeof a){if(0==a)return 0;var b=/(^[+-]?\d+)(\d{3})/;for(a+="";b.test(a);)a=a.replace(b,"$1,$2");return a}if("string"==typeof a)return b=parseFloat(a),isNaN(b)?"0":0==b?0:b};infra.search.VworldSearch={};
infra.search.query=function(a,b,c,d,e,f){b=infra.isDef(b)?b:"get";f=infra.isDef(f)?f:"";""!=f&&(c={url:a+jQuery.param(c)},a=f);jQuery.ajax({type:b,url:a,data:c,dataType:"json",async:!0,cache:!1,success:d,error:e})};infra.search.VworldSearch.proxy="http://map.vworld.kr/proxy.do";infra.search.VworldSearch.url="http://map.vworld.kr/search.do?";
infra.search.VworldSearch.query=function(a){var b=infra.isDef(a)?a:{};a=infra.isDef(b.q)?b.q:"";var c=infra.isDef(b.category)?b.category:"Juso",d=infra.isDef(b.pageUnit)?b.pageUnit:10,e=infra.isDef(b.pageIndex)?b.pageIndex:1,f=infra.isDef(b.apiKey)?b.apiKey:"",h=infra.isDef(b.success)?b.success:function(){};b=infra.isDef(b.error)?b.error:function(){};infra.search.query(infra.search.VworldSearch.url,"get",{q:a,category:c,pageUnit:d,output:"json",pageIndex:e,apiKey:f},h,b,infra.search.VworldSearch.proxy)};
var Typhoonroute=[],Typhoonrad=[],TyphoonPolygon=[];
infra.TyphoonDraw.prototype.CreatePolygon=function(a,b){this.data=a;var c=[],d=[],e=[],f=[];var h=[];var p=[],m=[],t=[],x=[],y="",u=[];var l=[];for(var r=[],k=[],v=[],n=0;n<a.length;n++){var q=new Proj4js.Point(a[n].typ_lon,a[n].typ_lat);Proj4js.transform(proj4326,proj900913,q);0>q.x&&(q.x*=-1);c[n]=[q.x,q.y];q=new ol.Feature({geometry:new ol.geom.Point(c[n])});Typhoonroute.unshift(c[n]);Typhoonrad.unshift(0);q.typNo=a[n].typ_seq;q.typEn=a[n].typ_en;q.day="\ud604\uc7ac";q.typTime=a[n].typ_tm;q.lat=
a[n].typ_lat;q.lon=a[n].typ_lon;q.ps=a[n].typ_ps;q.ws=a[n].typ_ws;q.loc=a[n].typ_loc;q.cur=!0;q.setStyle(this.circleStyle);if(y!=a[n].typ_en){y=a[n].typ_en;l.push(n);for(var g=1;10>=g;g++)null!=a[n]["ft"+g+"_tm"]&&(e.push(a[n]["ft"+g+"_rad"]),f.push(a[n]["ft"+g+"_tm"]),h.push(a[n]["ft"+g+"_lat"]),p.push(a[n]["ft"+g+"_lon"]),m.push(a[n]["ft"+g+"_ps"]),t.push(a[n]["ft"+g+"_ws"]),x.push(a[n]["ft"+g+"_loc"]));for(g=0;g<e.length;g++)e[g]*=1E3;for(g=0;10>g;g++)if(null!=a[n]["ft"+(g+1)+"_tm"]){q=new Proj4js.Point(p[g],
h[g]);Proj4js.transform(proj4326,proj900913,q);q=[q.x,q.y];d.push(q);var w=new ol.Feature({geometry:new ol.geom.Circle(q,e[g])});w.typNo=a[n].typ_seq;w.typEn=a[n].typ_en;w.day=g+1;w.typTime=f[g];w.lat=h[g];w.lon=p[g];w.ps=m[g];w.ws=t[g];w.loc=x[g];w.setStyle(this.circleStyle);Typhoonroute.push(q);Typhoonrad.push(e[g]);q=new ol.Feature({geometry:new ol.geom.Point(q)});q.typNo=a[n].typ_seq;q.typEn=a[n].typ_en;q.day=g+1;q.typTime=f[g];q.lat=h[g];q.lon=p[g];q.ps=m[g];q.ws=t[g];q.loc=x[g];q.setStyle(this.circleStyle);
r.push(q);v.push(e[g])}}null!=e[0]&&(g=this.getContactPoints(c[n],d[0],e[0]),g.splice(1,0,c[n]),(new ol.Feature({geometry:new ol.geom.LineString(g),id:"merged"})).setStyle(this.circleStyle));for(g=1;g<e.length;g++)null!=e[g]&&0!=e[g]&&(q=this.getTopContactPoint(d[g-1],d[g],e[g-1],e[g]),(new ol.Feature({geometry:new ol.geom.LineString(q),id:"merged"})).setStyle(this.circleStyle),f=this.getBottomContactPoint(d[g-1],d[g],e[g-1],e[g]),(new ol.Feature({geometry:new ol.geom.LineString(f),id:"merged"})).setStyle(this.circleStyle),
1==g&&(h=[],h[0]=c[0],h[1]=q[0],h[2]=f[0],h[3]=c[0],h=new ol.Feature({geometry:new ol.geom.Polygon([h]),id:"merged"}),h.setStyle(this.circleStyle),k.push(h)),h=[],h[0]=q[0],h[1]=f[0],h[2]=f[1],h[3]=q[1],h[4]=q[0],h=new ol.Feature({geometry:new ol.geom.Polygon([h]),id:"merged"}),h.setStyle(this.circleStyle),k.push(h));d=[];e=[];f=[];h=[];p=[];m=[];t=[];x=[]}for(g=1;g<=l.length;g++)g==l.length?u.push(c.slice(l[g-1],a.length)):u.push(c.slice(l[g-1],l[g]));for(g=0;g<u.length;g++)n=new ol.Feature(new ol.geom.LineString(u[g])),
n.typNo=a[l[g]].typ_seq,n.typEn=a[l[g]].typ_en,n.day="\ud604\uc7ac",n.typTime=a[l[g]].typ_tm,n.lat=a[l[g]].typ_lat,n.lon=a[l[g]].typ_lon,n.ps=a[l[g]].typ_ps,n.ws=a[l[g]].typ_ws,n.loc=a[l[g]].typ_loc,n.cur=!0,n.setStyle(this.circleStyle);n=new jsts.io.OL3Parser;u=n.read(k[0].getGeometry());for(g=0;g<k.length;g++){0==g?(l=n.read(r[g].getGeometry()),l=l.buffer(v[g])):(l=n.read(r[g].getGeometry()),l=l.buffer(v[g]),u=jsts_result_geom=u.union(l),l=n.read(k[g].getGeometry()));u=jsts_result_geom=u.union(l);
ol_geom=n.write(jsts_result_geom);c=[];for(l=0;l<jsts_result_geom.getCoordinates().length;l++)c[l]=[jsts_result_geom.getCoordinates()[l].x,jsts_result_geom.getCoordinates()[l].y];l=new ol.Feature({geometry:new ol.geom.Polygon([c]),id:"route"});c=new ol.style.Style({fill:new ol.style.Fill({color:"rgba(222,237,252,0.2)"}),stroke:new ol.style.Stroke({color:"#2237F4",width:2})});l.setStyle(c);TyphoonPolygon.push(l)}v=new jsts.io.WKTReader;n=0;r=[];for(k=[];""!=b[n].coordX&&""!=b[n].coordY&&null!=b[n].coordX&&
null!=b[n].coordY&&(q=new Proj4js.Point(b[n].coordX,b[n].coordY),Proj4js.transform(proj4326,proj900913,q),g=v.read("POINT ("+q.x+" "+q.y+")"),1==jsts_result_geom.contains(g)&&(g=mapSafeList(b[n].coordX,b[n].coordY,b[n].grade,this.safelayer,b[n].fac_name+" "+b[n].fac_type_name),null!=g&&r.push(g),k.push(b[n]))),n++,null!=b[n];);v=[];for(l=0;l<r.length;l++)v.push(r[l].getGeometry().getCoordinates());0<v.length&&flashUnsafefac(v);return k};
function flashUnsafefac(a){var b=(new Date).getTime();map.on("postcompose",function(c){var d=c.vectorContext,e=c.frameState;c=new ol.geom.MultiPoint(a);var f=(e.time-b)%1300/1300;e=15*jQuery.easing.easeOutBack(f)+1;jQuery.easing.easeInSine(f);f=jQuery.easing.swing(1-f);e=new ol.style.Style({image:new ol.style.Circle({radius:e,snapToPixel:!1,fill:new ol.style.Fill({color:"rgba(255, 0, 0, "+f+")"}),stroke:new ol.style.Stroke({color:"rgba(255, 0, 0, 1)",width:.5})})});d.setStyle(e);d.drawGeometry(c);
map.render()})}var eventFinish=!1;
function flashRed(a,b){var c=(new Date).getTime();var d=map.on("postcompose",function(e){if(eventFinish)ol.Observable.unByKey(d);else{var f=e.vectorContext,h=e.frameState;e=new ol.geom.MultiPoint(a);var p=1E3*b,m=(h.time-c)%p/p;h=15*ol.easing.easeOut(m)+1;p=ol.easing.easeOut(1-m);var t=ol.easing.easeOut(1-m);m=ol.easing.easeOut(1-m)/2;h=new ol.style.Style({image:new ol.style.Circle({radius:h,snapToPixel:!1,fill:new ol.style.Fill({color:"rgba(255, 33, 33, "+m+")"}),stroke:new ol.style.Stroke({color:"rgba(255, 33, 33, "+
p+")",width:.1+1*t})}),text:new ol.style.Text({textAlign:"left",textBaseline:"top",font:"bold 10pt \uad74\ub9bc",text:"85",fill:new ol.style.Fill({color:[255,33,33,1]}),stroke:new ol.style.Stroke({color:[255,255,255,.5],width:.5*t}),offsetX:-10,offsetY:-30,rotation:0})});f.setStyle(h);f.drawGeometry(e);map.render()}})}
function flashGreen(a,b){var c=(new Date).getTime();var d=map.on("postcompose",function(e){if(eventFinish)ol.Observable.unByKey(d);else{var f=e.vectorContext,h=e.frameState;e=new ol.geom.MultiPoint(a);var p=1E3*b,m=(h.time-c)%p/p;h=7*ol.easing.easeOut(m)+1;p=ol.easing.easeOut(1-m);var t=ol.easing.easeOut(1-m);m=ol.easing.easeOut(1-m);h=new ol.style.Style({image:new ol.style.Circle({radius:h,snapToPixel:!1,fill:new ol.style.Fill({color:"rgba(32,205,32, "+m+")"}),stroke:new ol.style.Stroke({color:"rgba(32,205,32, "+
p+")",width:.1+1*t})}),text:new ol.style.Text({textAlign:"left",textBaseline:"top",font:"bold 10pt \uad74\ub9bc",text:"100",fill:new ol.style.Fill({color:[32,205,32,1]}),stroke:new ol.style.Stroke({color:[255,255,255,.5],width:.5*t}),offsetX:-12,offsetY:-30,rotation:0})});f.setStyle(h);f.drawGeometry(e);map.render()}})}
function flashYellow(a,b){var c=(new Date).getTime();var d=map.on("postcompose",function(e){if(eventFinish)ol.Observable.unByKey(d);else{var f=e.vectorContext,h=e.frameState;e=new ol.geom.MultiPoint(a);var p=1E3*b,m=(h.time-c)%p/p;h=9*ol.easing.easeOut(m)+1;p=ol.easing.easeOut(1-m);var t=ol.easing.easeOut(1-m);m=ol.easing.easeOut(1-m);h=new ol.style.Style({image:new ol.style.Circle({radius:h,snapToPixel:!1,fill:new ol.style.Fill({color:"rgba(255, 255, 0, "+m+")"}),stroke:new ol.style.Stroke({color:"rgba(255, 255, 0, "+
p+")",width:.1+1*t})}),text:new ol.style.Text({textAlign:"left",textBaseline:"top",font:"bold 10pt \uad74\ub9bc",text:"95",fill:new ol.style.Fill({color:[255,255,0,1]}),stroke:new ol.style.Stroke({color:[255,255,255,.5],width:.5*t}),offsetX:-10,offsetY:-30,rotation:0})});f.setStyle(h);f.drawGeometry(e);map.render()}})}
function flashOrange(a,b){var c=(new Date).getTime();var d=map.on("postcompose",function(e){if(eventFinish)ol.Observable.unByKey(d);else{var f=e.vectorContext,h=e.frameState;e=new ol.geom.MultiPoint(a);var p=1E3*b,m=(h.time-c)%p/p;h=11*ol.easing.easeOut(m)+1;p=ol.easing.easeOut(1-m);var t=ol.easing.easeOut(1-m);m=ol.easing.easeOut(1-m)/2;h=new ol.style.Style({image:new ol.style.Circle({radius:h,snapToPixel:!1,fill:new ol.style.Fill({color:"rgba(255, 128, 0, "+m+")"}),stroke:new ol.style.Stroke({color:"rgba(255, 128, 0, "+
p+")",width:.1+1*t})}),text:new ol.style.Text({textAlign:"left",textBaseline:"top",font:"bold 10pt \uad74\ub9bc",text:"90",fill:new ol.style.Fill({color:[255,128,0,1]}),stroke:new ol.style.Stroke({color:[255,255,255,.5],width:.5*t}),offsetX:-10,offsetY:-30,rotation:0})});f.setStyle(h);f.drawGeometry(e);map.render()}})}
function flashEvent(a,b,c){var d=(new Date).getTime();var e=map.on("postcompose",function(b){var f=(new Date).getTime();c||(c=5E3);if(f-d>c)ol.Observable.unByKey(e);else{f=b.vectorContext;var p=b.frameState;b=new ol.geom.MultiPoint(a);var m=(p.time-d)/2E3;p=20*ol.easing.easeOut(m)+5;ol.easing.easeOut(1-m);ol.easing.easeOut(1-m);m=ol.easing.easeOut(1-m)/2;p=new ol.style.Style({image:new ol.style.Circle({radius:p,snapToPixel:!1,fill:new ol.style.Fill({color:"rgba(255, 33, 33, "+m+")"}),stroke:new ol.style.Stroke({color:"rgba(255, 33, 33, "+
m+")",width:2})})});f.setStyle(p);f.drawGeometry(b);map.render()}})};