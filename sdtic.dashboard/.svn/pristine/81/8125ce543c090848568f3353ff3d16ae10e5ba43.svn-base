<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c"       uri="http://java.sun.com/jsp/jstl/core"                     %>

<!DOCTYPE html>
<html lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>도로정보시스템 사용자 Top10</title>
	<c:set var="contextPath" value="${pageContext.request.contextPath}" />
	<script type="text/javascript" src="${contextPath}/js/common/jquery-2.1.4.min.js"></script>
	<script type="text/javascript" src="${contextPath}/js/echarts/dist/echarts.min.js"></script>
	<script type="text/javascript">
        $(window).load(function(){
            
        });
    </script>
	<style>
		body {
		  background: #ffffffff;
		  color: #7b7b7b;
		
		  -webkit-font-smoothing: antialiased;
		  -moz-osx-font-smoothing: grayscale;
		  overflow: hidden;
		  /* force scroll to appear */
		}
		
		a {
		  outline: none;
		  color: #81c483;
		  text-decoration: none;
		}
		
		.grid__item {  
		  height: 33px;
		  width: inherit;
		  position: relative;
		  color: inherit;
		  background: #ffffffff;
		  cursor: pointer;
		  text-align: center;
		  display: -webkit-box;
		  display: -webkit-flex;
		  display: -ms-flexbox;
		  display: flex;
		  -webkit-box-direction: normal;
		  -webkit-box-orient: vertical;
		  -webkit-flex-direction: row;
		  -ms-flex-direction: row;
		  flex-direction: row;
		  -webkit-justify-content: center;
		  justify-content: center;
		    /*??? ??*/
		  margin-top: 1px;
	        border: 1px solid rgba(74, 74, 74, 0.2);
            
		  color: #fff;
		}
		
		.itemGroup{  
		  height: 30px;
		  width: inherit;
		  position: relative;
		  cursor: pointer;
		  text-align: center;
		  display: -webkit-box;
		  display: -webkit-flex;
		  display: -ms-flexbox;
		  display: flex;
		  -webkit-box-direction: normal;
		  -webkit-box-orient: vertical;
		  -webkit-flex-direction: row;
		  -ms-flex-direction: row;
		  flex-direction: row;
		  -webkit-justify-content: center;
		  justify-content: center;
		    /*margin-top? ??*/
		  margin-top: 1px;
	      background:#ffffffff;
		  border: 1px solid rgba(74, 74, 74, 0.2);
		}
	    
	    .title {
		  margin: 0;
		  font-size: 15px;
		  text-align: center;
		}
		
		.title--preview {
		/*  -webkit-flex: 0.3;*/
		/*  flex: 1;*/
		  display: -webkit-flex;
		  display: flex;
		  -webkit-align-items: center;
		  align-items: center;
		  -webkit-justify-content: center;
		  justify-content: center;
		}
		
		.group {
		  margin: 0;
		  font-size: 15px;
		  color:#fff;
		  text-align: center;
		}
		
		.group--preview {
		/*  -webkit-flex: 0.3;*/
		/*  flex: 1;*/
		  display: -webkit-flex;
		  display: flex;
		  -webkit-align-items: center;
		  align-items: center;
		  -webkit-justify-content: center;
		  justify-content: center;*/
		  background-color:#ffffffff;
		}
		
		    .grid__item--animate .title--preview {
      -webkit-transition-delay: 0s;
      transition-delay: 0s;
      opacity: 0;
      -webkit-transform: translate3d(0, -20px, 0);
      transform: translate3d(0, -20px, 0);
    }
    
    .title--preview,
    .loader
    .category{
      -webkit-transition: -webkit-transform 0.2s, opacity 0.2s;
      transition: transform 0.2s, opacity 0.2s;
      -webkit-transition-timing-function: cubic-bezier(0.7, 0, 0.3, 1);
      transition-timing-function: cubic-bezier(0.7, 0, 0.3, 1);
    }
    
    .title--preview {
      -webkit-transition-delay: 0.15s;
      transition-delay: 0.15s;
    }
    
	</style>
</head>
<body>
	<div id="main" style="width:350px; height:240px; left: 560px; float: left"> </div>
    <script type="text/javascript">
        // based on prepared DOM, initialize echarts instance
        jQuery(document).ready(function($){
	
	    	//-----------------------------------AJAX 호출 영역 ---------------------------------------
	
	    	        getBucCmmnLoadinfouserdbAjax();
	    	       // getBucCmmnLoadinfomenudbgridAjax();
	    	        
	
	    	//-----------------------------------AJAX 호출 영역 ---------------------------------------
	    })
	    
	    var griddata = [];
        var controlVal = 0;
        var animation;
        var chartNum = 0; 
		var rotateCnt=0;
		var emptydata = [ {rank: '', hgrn_systm_cd: '', dptcd: '', rtur_id: '', rtur_nm: '', cnt: '', y_rank: ''}];
        
		// 파이 차트 데이터 ajax 함수
        function getBucCmmnLoadinfouserchartdbAjax(chartNum){
        	
        	 $.ajax({
        	 url : "${pageContext.request.contextPath}/buc/bucCmmnLoadinfouserdb.do",
	            async : false,
	            dataType : 'json',
	            // 그리드 데이터를 파라메터로 쿼리에 넘김
	            data:{
	            	'use_system' : griddata[chartNum].hgrn_systm_cd,
	            	'user_id' : griddata[chartNum].rtur_id
	            },
	            success :function(json) {
	            	// 파이차트 데이터 맵핑
	            	if(json.data2.length < 5){
		            	for(var i =0;i<json.data2.length;i++) {
		            		chartdata[i].name = json.data2[i].use_systm_nm;
		            		chartdata[i].value = parseInt(json.data2[i].row_cnt);
		            	}
		            	for(var i = json.data2.length;i<5;i++) {
		            		chartdata[i].value = '';
		            		chartdata[i].name = '';
		            	}
	            	}
	            	else {
	            		for(var i =0;i<json.data2.length;i++) {
		            		chartdata[i].name = json.data2[i].use_systm_nm;
		            		chartdata[i].value = parseInt(json.data2[i].row_cnt);
		            	}
	            	}
	            }, error : function() {
	            	console.log(arguments);
	            }, complete: function(json) {
	            	myChart.setOption(option);
	            	setTimeout(function() {	 
	            		 myChart.clear();	                     
	            		chartNum++;
	            		gridNum++;
	            		controlVal++;	            		
	            		if(controlVal == 5) {
	            			if(gridNum>5){
		                        $('#gridItem' + (gridNum-5)).css('color', '#fff');
		                        $('#gridItem' + (gridNum-4)).css('color', '#fff');
		                        $('#gridItem' + (gridNum-3)).css('color', '#fff');
		                        $('#gridItem' + (gridNum-2)).css('color', '#fff');
		                        $('#gridItem' + (gridNum-2)).css('color', '#fff');
		                        gridNum=1;
		                        setTimeout(function() {
		                        	rotatetextColor(gridNum);  
		                        }, 4700);
		                    } else {                
		                        rotatetextColor(gridNum);                  
		                    }		            			
	            			
	            			animation = setInterval(function() {
	            				rotateSystem(selectorNum, dataNum);	  
	            				selectorNum++;
	            				rotateCnt++;
	            				dataNum++;
	            				if(selectorNum > 10) {
	            					selectorNum = 1;
	            					if(dataNum> 49) {
	            						dataNum =0;
	            					}
	            				}
	            				if(rotateCnt % 5 ==0) {
	            					clearInterval(animation);
	            				}
	            			}, 700);
	            			controlVal=0;
	            			
	            			setTimeout(function() {			            		
			            		if(chartNum<50) {
			                         setTimeout(function() {
			                         	if(chartNum<50){
			                         		getBucCmmnLoadinfouserchartdbAjax(chartNum);
			                         	}
			                         },100);
			                     } else {
			                     	if(chartNum >=50){
			                         	chartNum=0;
			                         	getBucCmmnLoadinfouserchartdbAjax(chartNum);
			                     	}
			                     }   
	            			}, 4700);
		            	} else {
		            		clearInterval(animation);
		            		if(gridNum>5){
		                        $('#gridItem' + (gridNum-5)).css('color', '#fff');
		                        $('#gridItem' + (gridNum-4)).css('color', '#fff');
		                        $('#gridItem' + (gridNum-3)).css('color', '#fff');
		                        $('#gridItem' + (gridNum-2)).css('color', '#fff');
		                        $('#gridItem' + (gridNum-2)).css('color', '#fff');
		                        gridNum=1;
		                        setTimeout(function() {
		                        	rotatetextColor(gridNum);  
		                        }, 4000);
		                    } else {                
		                        rotatetextColor(gridNum);                  
		                    }
		            		
		            		if(chartNum<50) {
		                         setTimeout(function() {
		                         	if(chartNum<50){
		                         		getBucCmmnLoadinfouserchartdbAjax(chartNum);
		                         	}
		                         },100);
		                     } else {
		                     	if(chartNum >=50){
		                         	chartNum=0;
		                         	getBucCmmnLoadinfouserchartdbAjax(chartNum);
		                     	}
		                     }   
		            	} 
	            	}, 4700);	            	
	            }	            	
        	 });
        }
        
		//그리드 데이터 ajax 함수
	    function getBucCmmnLoadinfouserdbAjax(){
	        $.ajax({
	            url : "${pageContext.request.contextPath}/buc/bucCmmnLoadinfouserdb.do",
	            async : false,
	            dataType : 'json',
	            success :function(json) {
	                /* if(json.data1.length > 0 ){
	                	data[0].name = '전체';
	                	data[0].value = 0;
	                    for(var i=0; i<json.data1.length; i++)
	                    {
							if(json.data1[i].systm_nm == '설계'){
								data[1].name = json.data1[i].systm_nm;
		                    	data[1].value = json.data1[i].cnt;
							} else if(json.data1[i].systm_nm == '건설'){
								data[2].name = json.data1[i].systm_nm;
		                    	data[2].value = json.data1[i].cnt;
							} else if(json.data1[i].systm_nm == '유지관리'){
								data[3].name = json.data1[i].systm_nm;
		                    	data[3].value = json.data1[i].cnt;
							} else if(json.data1[i].systm_nm == '시설물'){
								data[4].name = json.data1[i].systm_nm;
		                    	data[4].value = json.data1[i].cnt;
							}	                    
	                    	
	                    }
	                    
	                    myChart.setOption(option);
	                  
	                }
	                else{
	                console.log(arguments);
	                } */
	                
	                if(json.data1.length > 0 ){
	                	var entire = 0;
	                	var design = 10;
	                	var constru = 20;
	                	var mainte = 30;
	                	var ferc = 40;
	                    for(var i=0; i<json.data1.length; i++)
	                    {
							if(json.data1[i].hgrn_systm_cd == 'ALL') {
								griddata[entire++] = json.data1[i];		
							} else if(json.data1[i].hgrn_systm_cd == 'DSG') {
								griddata[design++] = json.data1[i];
							} else if(json.data1[i].hgrn_systm_cd == 'CON') {
								griddata[constru++] = json.data1[i];
							} else if(json.data1[i].hgrn_systm_cd == 'UKP') {
								griddata[mainte++] = json.data1[i];
							} else if(json.data1[i].hgrn_systm_cd == 'FCL') {
								griddata[ferc++] = json.data1[i];
							}
	                    }/* 
	                    if(entire < 10 || design < 20 || constru < 30 || mainte < 40 || ferc < 50) {
	                    	for(entire;entire<10;entire++){
	                    		griddata[entire] = emptydata;
	                    	}
	                    	for(design;design<20;design++){
	                    		griddata[design] = emptydata;
	                    	}
	                    	for(constru;constru<30;constru++){
	                    		griddata[constru] = emptydata;
	                    	}
	                    	for(mainte;mainte<40;mainte++){
	                    		griddata[mainte] = emptydata;
	                    	}
	                    	for(ferc;ferc<50;ferc++){
	                    		griddata[ferc] = emptydata;
	                    	}
	                    } */
	                }
	                else{
	                console.log(arguments);
	                }
	
	            },error : function(){
	                console.log(arguments);
	            }, complete : function() {
	            	initGrid(); 
	                setTimeout(function() {
	                    toggletextColor();                
	                }, 1000);
	            }
	        });
		
	    }
        
        var myChart = echarts.init(document.getElementById('main'),'dark');
        
       	chartdata = [{
            value: 0,
            name: ''
        }, {
            value: 0,
            name: ''
        }, {
            value: 0,
            name: ''
        }, {
            value: 0,
            name: ''
        }, {
            value: 0,
            name: ''
        }];
        option = {
            //backgroundColor: '#fff',
            title: {
                text: '',
                //subtext: '2017년 7월',
                x: '38%',
                y: '46%',
                textStyle: {
                    fontSize: 14,
                    color: '#fff'
                }
            },
            tooltip: {
                show: false,
                trigger: 'item',
                formatter: "value"
            },
           /* legend: {
                orient: 'horizontal',
                bottom: '10%',
                data: ['SMS', 'Mail', '사내메신저', '팝업']
            },*/
            series: [{
                type: 'pie',
                selectedMode: 'single',
                radius: ['27%', '76%'],
                center: ['48%', '53%'],
                color: ['#91c7ae', '#c23531', '#2f4554', '#61a0a8', '#d48265'],

                label: {
                    normal: {
                    	formatter: function(o) {
                            var result = '';
                          	if(o.name == '전체'){
                          		result = o.name;
                          	}
                          	else{
                          		result = o.name + "\n" + o.value + "건";
                          	}
                            return result;
                        },
                        
                        textStyle: {
                            color: '#fff',
                            fontSize: 10
                        }
                    },
                    emphasis: {
                     show: true,
                     textStyle: {
                         color: '#fff',
                         fontFamily: 'sans-serif',
                         fontSize: '18',
                     }
                 }
                },
                    itemStyle: {
                    normal: {
                        borderWidth: 2,
                        borderColor: '#ffffffff',
                    },
                    emphasis: {
                        borderWidth: 0,
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.5)',

                    }
                },
                data: chartdata
            }]
        };
                                    
       

//        function Etime(){
//        	getBucCmmnLoadinfouserchartdbAjax(chartNum);        	
            /* setInterval(function() {
                myChart.clear();
                if(chartNum<50) {
                    setTimeout(function() {
                    	getBucCmmnLoadinfouserchartdbAjax(chartNum);
                        chartNum++;
                    },100);
                } else {
                    chartNum=0;
                }               
            }, 4700);    */                   
//           var count = 0;
//           myChart.dispatchAction({
//               type: 'downplay',
//               seriesIndex: 0,
//           });
//           myChart.dispatchAction({
//               type: 'highlight',
//               seriesIndex: 0,
//               dataIndex: (count++) %5
//           });
//           count = 1;
//           setInterval(function () {
//	            myChart.dispatchAction({
//	                type: 'downplay',
//	                seriesIndex: 0
//	            });
//	            myChart.dispatchAction({
//	                type: 'highlight',
//	                seriesIndex: 0,
//	                dataIndex: (count++) %5
//	            });
/*       		}, 13000);*/
//        }
        // use configuration item and data specified to show chart
   
    	var isVisible = true;
    </script>
    <div id="systext" style="width:550px; margin-right: 15px; height:15px; font-size:13px; text-align: right; color:#fff; background-color:#ffffffff">[전체]</div> 
    
	<div id="container_ID" class="container" style="position:absolute; width:550px; height:240px; margin-top: 10px; float: left">			
		<div id="theGrid" class="main">
			<section class="grid">
                   <!-- 카테고리 추가-->
			    <a id="itemCategory" class="itemGroup" href="#">
					<div class="group group--preview" style="width: 10%">순위</div>
					<div class="group group--preview" style="width: 40%">부서</div>
					<div class="group group--preview" style="width: 20%">이름</div>
					<div class="group group--preview" style="width: 15%">사용건수</div>
					<div class="group group--preview" style="width: 15%">전일순위</div>
				</a>
				<!-- 카테고리 추가-->
				<a id="gridItem1" class="grid__item" href="#">
					<div class="title title--preview" id="tRanking1" style="width: 10%"></div>
					<div class="title title--preview" id="systemName1" style="width: 40%"></div>
					<div class="title title--preview" id="useMenu1" style="width: 20%"></div>
					<div class="title title--preview" id="totalData1" style="width: 15%"></div>
					<div class="title title--preview" style="width: 15%">
						<table>
                               <tr style="height: inherit">
                                  <td style="width: 50%" align="right"><div id="yRanking1" style="display: inline-block"></div><div id="yRankblock1_1" style="display:inline-block">( </div></td>
                                  <td style="width: 50%"><img id="rankingImg1" src="" width="20px" height="15px"><div id="yRankblock1_2" style="display:inline-block"> )</div></td>
                               </tr>
                       	</table>
					</div>
				</a>
				<a id="gridItem2" class="grid__item" href="#">
					<div class="title title--preview" id="tRanking2" style="width: 10%"></div>
					<div class="title title--preview" id="systemName2" style="width: 40%"></div>
					<div class="title title--preview" id="useMenu2" style="width: 20%"></div>
					<div class="title title--preview" id="totalData2" style="width: 15%"></div>
					<div class="title title--preview" style="width: 15%">
						<table>
                               <tr style="height: inherit">
                                  <td style="width: 50%" align="right"><div id="yRanking2" style="display: inline-block"></div><div id="yRankblock2_1" style="display:inline-block">( </div></td>
                                  <td style="width: 50%"><img id="rankingImg2" src="" width="20px" height="15px"><div id="yRankblock2_2" style="display:inline-block"> )</div></td>
                               </tr>
                           </table>
					</div>
				</a>
				<a id="gridItem3" class="grid__item" href="#">
					<div class="title title--preview" id="tRanking3" style="width: 10%"></div>
					<div class="title title--preview" id="systemName3" style="width: 40%"></div>
					<div class="title title--preview" id="useMenu3" style="width: 20%"></div>
					<div class="title title--preview" id="totalData3" style="width: 15%"></div>
					<div class="title title--preview" style="width: 15%">
						<table>
                               <tr style="height: inherit">
                                  <td style="width: 50%" align="right"><div id="yRanking3" style="display: inline-block"></div><div id="yRankblock3_1" style="display:inline-block">( </div></td>
                                  <td style="width: 50%"><img id="rankingImg3" src="" width="20px" height="15px"><div id="yRankblock3_2" style="display:inline-block"> )</div></td>
                               </tr>
                           </table>
                       </div>
				</a>
				<a id="gridItem4" class="grid__item" href="#">
					<div class="title title--preview" id="tRanking4" style="width: 10%"></div>
					<div class="title title--preview" id="systemName4" style="width: 40%"></div>
					<div class="title title--preview" id="useMenu4" style="width: 20%"></div>
					<div class="title title--preview" id="totalData4" style="width: 15%"></div>
					<div class="title title--preview" style="width: 15%">
						<table>
                           <tr style="height: inherit">
                              <td style="width: 50%" align="right"><div id="yRanking4" style="display: inline-block"></div><div id="yRankblock4_1" style="display:inline-block">( </div></td>
                              <td style="width: 50%"><img id="rankingImg4" src="" width="20px" height="15px"><div id="yRankblock4_2" style="display:inline-block"> )</div></td>
                           </tr>
                           </table>
					</div>
				</a>
				<a id="gridItem5" class="grid__item" href="#">
					<div class="title title--preview" id="tRanking5" style="width: 10%"></div>
					<div class="title title--preview" id="systemName5" style="width: 40%"></div>
					<div class="title title--preview" id="useMenu5" style="width: 20%"></div>
					<div class="title title--preview" id="totalData5" style="width: 15%"></div>
					<div class="title title--preview" style="width: 15%">
						<table>
                           <tr style="height: inherit">
                              <td style="width: 50%" align="right"><div id="yRanking5" style="display: inline-block"></div><div id="yRankblock5_1" style="display:inline-block">( </div></td>
                              <td style="width: 50%"><img id="rankingImg5" src="" width="20px" height="15px"><div id="yRankblock5_2" style="display:inline-block"> )</div></td>
                           </tr>
                           </table>
					</div>
				</a>
			</section>
		</div>
	</div>
	
	<script type="text/javascript">	
        var selectorNum = 6;
        var gridNum = 1;
        var dataNum = 5;
        
        // ajax함수 및 그리드선택 함수 호출
        function toggletextColor(){
            rotatetextColor(gridNum);
            getBucCmmnLoadinfouserchartdbAjax(chartNum);
           // setInterval(function() {
                /* if(gridNum>5){
                    $('#gridItem' + (gridNum-5)).css('color', '#fff');
                    $('#gridItem' + (gridNum-4)).css('color', '#fff');
                    $('#gridItem' + (gridNum-3)).css('color', '#fff');
                    $('#gridItem' + (gridNum-2)).css('color', '#fff');
                    $('#gridItem' + (gridNum-2)).css('color', '#fff');
                    gridNum=1;
                } else {                
                    rotatetextColor(gridNum);
                    gridNum++;                    
                } */
                
               /*  myChart.clear();
                if(chartNum<50) {
                    setTimeout(function() {
                    	if(chartNum<50){
                    		getBucCmmnLoadinfouserchartdbAjax(chartNum);
                        	chartNum++;
                    	}
                    },100);
                } else {
                	if(chartNum >=50){
                    	chartNum=0;
                    	getBucCmmnLoadinfouserchartdbAjax(chartNum);
                	}
                }    */

            //}, 4700);
        }
	    
        //그리드 데이터 초기화 함수
        function initGrid() {
        	for(var i =0; i< 5; i++) {
        		if(griddata[i] != null) {
	        		$('#tRanking' + (i+1)).text(griddata[i].rank);
	            	$('#systemName' + (i+1)).text(griddata[i].dptcd);
	            	$('#useMenu' + (i+1)).text(griddata[i].rtur_nm);
	            	$('#totalData' + (i+1)).text(griddata[i].cnt);
	            	$('#yRankblock' + (i+1) + '_1').text('( ');
	            	$('#yRankblock' + (i+1) + '_2').text(' )');
	            	if(griddata[i].y_rank == null){
	            		$('#yRanking' + (i+1)).text("");
	            		$('#rankingImg' + (i+1)).attr('src', "${contextPath}/images/bucrs/uparrow.png");
	            	} else {
	            		$('#yRanking' + (i+1)).text(griddata[i].y_rank);
	            		if(parseInt(griddata[i].y_rank) > parseInt(griddata[i].rank))
	            			$('#rankingImg' + (i+1)).attr('src', "${contextPath}/images/bucrs/uparrow.png");
	            		else if(parseInt(griddata[i].y_rank) < parseInt(griddata[i].rank))
	            			$('#rankingImg' + (i+1)).attr('src', "${contextPath}/images/bucrs/downarrow.png");
	            		else
	            			$('#rankingImg' + (i+1)).attr('src', "${contextPath}/images/bucrs/minus.png");
	            	}
        		} else {
	        		$('#tRanking' + (i+1)).text('');
	            	$('#systemName' + (i+1)).text('');
	            	$('#useMenu' + (i+1)).text('');
	            	$('#totalData' + (i+1)).text('');
	            	$('#yRanking' + (i+1)).text('');
	            	$('#yRankblock' + (i+1) + '_1').text('');
	            	$('#yRankblock' + (i+1) + '_2').text('');
					$('#rankingImg' + (i+1)).attr('src', "");
        		}
        	}
        }
        
        // 그리드 애니메이션 효과 타이머
	    function changeSelection() {
	    	var toggle = setInterval(function() {  
	    		if(selectorNum>=6 && selectorNum<= 10){
                    setTimeout(function() {
                        if(selectorNum>=6 && selectorNum <=10){
                            rotateSystem(selectorNum, dataNum);
                        	selectorNum++;
							dataNum++;
                        }                                                    
                    }, 23500);
                } else if(selectorNum> 10) {
                    setTimeout(function() {
                        if(selectorNum> 10) {
                            selectorNum = 1;
                        }
                        if(dataNum>49){
                        	dataNum =0;
                        }
                    }, 23500);                    
                } else{
                    rotateSystem(selectorNum, dataNum);
                    selectorNum++;
                    dataNum++;
                }
	        }, 700);
	    }
        
	    // 그리드 애니메이션 효과 함수
        function rotateSystem(selectorNum, dataNum) {
	        if(dataNum >=0 && dataNum < 10)
				$('#systext').text('[전체]');
			else if(dataNum >= 10 && dataNum < 20)
				$('#systext').text('[설계]');    
			else if(dataNum >= 20 && dataNum < 30)
				$('#systext').text('[건설]');   
			else if(dataNum >= 30 && dataNum < 40)
				$('#systext').text('[유지관리]');   
			else if(dataNum >= 40 && dataNum < 50)
				$('#systext').text('[시설물]');   
	        	
       		if(selectorNum<=5) {
       			$("#gridItem" + selectorNum).addClass("grid__item--animate");
       		 	setTimeout(function() {
       		 		if(griddata[dataNum] != null){
	       		 		$('#tRanking' + selectorNum).text(griddata[dataNum].rank);
	                	$('#systemName' + selectorNum).text(griddata[dataNum].dptcd);
	                	$('#useMenu' + selectorNum).text(griddata[dataNum].rtur_nm);
	                	$('#totalData' + selectorNum).text(griddata[dataNum].cnt);
	                	$('#yRankblock' + selectorNum + '_1').text('( ');
	                	$('#yRankblock' + selectorNum + '_2').text(' )');
	                	if(griddata[dataNum].y_rank == null){
	                		$('#yRanking' + selectorNum).text("");
	                		$('#rankingImg' + selectorNum).attr('src', "${contextPath}/images/bucrs/uparrow.png");
	                	} else {
	                		$('#yRanking' + selectorNum).text(griddata[dataNum].y_rank);
	                		if(parseInt(griddata[dataNum].y_rank) > parseInt(griddata[dataNum].rank))
	                			$('#rankingImg' + selectorNum).attr('src', "${contextPath}/images/bucrs/uparrow.png");
	                		else if(parseInt(griddata[dataNum].y_rank) < parseInt(griddata[dataNum].rank))
	                			$('#rankingImg' + selectorNum).attr('src', "${contextPath}/images/bucrs/downarrow.png");
	                		else
	                			$('#rankingImg' + selectorNum).attr('src', "${contextPath}/images/bucrs/minus.png");
	                	}	
       		 		} else {
	       		 		$('#tRanking' + selectorNum).text("");
	                	$('#systemName' + selectorNum).text("");
	                	$('#useMenu' + selectorNum).text("");
	                	$('#totalData' + selectorNum).text("");
	                	$('#yRanking' + selectorNum).text("");
	                	$('#yRankblock' + selectorNum + '_1').text('');
	                	$('#yRankblock' + selectorNum + '_2').text('');
	                	$('#rankingImg' + selectorNum).attr('src', "");	                	
       		 		}                	
                    $("#gridItem" + selectorNum).removeClass("grid__item--animate");
                }, 350);	 
            } else{       
             	$("#gridItem" + (selectorNum -5)).addClass("grid__item--animate");
           	 	setTimeout(function() {
           	 		if(griddata[dataNum] != null){
	           	 		$('#tRanking' + (selectorNum-5)).text(griddata[dataNum].rank);
	                	$('#systemName' + (selectorNum-5)).text(griddata[dataNum].dptcd);
	                	$('#useMenu' + (selectorNum-5)).text(griddata[dataNum].rtur_nm);
	                	$('#totalData' + (selectorNum-5)).text(griddata[dataNum].cnt);
	                	if(griddata[dataNum].y_rank == null){
	                		$('#yRanking' + (selectorNum-5)).text("");
	                		$('#rankingImg' + (selectorNum-5)).attr('src', "${contextPath}/images/bucrs/uparrow.png");
	                	} else {
	                		$('#yRanking' + (selectorNum-5)).text(griddata[dataNum].y_rank);
	                		if(parseInt(griddata[dataNum].y_rank) > parseInt(griddata[dataNum].rank))
	                			$('#rankingImg' + (selectorNum-5)).attr('src', "${contextPath}/images/bucrs/uparrow.png");
	                		else if(parseInt(griddata[dataNum].y_rank) < parseInt(griddata[dataNum].rank))
	                			$('#rankingImg' + (selectorNum-5)).attr('src', "${contextPath}/images/bucrs/downarrow.png");
	                		else
	                			$('#rankingImg' + (selectorNum-5)).attr('src', "${contextPath}/images/bucrs/minus.png");
	                	}
           	 		} else {
	           	 		$('#tRanking' + (selectorNum-5)).text("");
	                	$('#systemName' + (selectorNum-5)).text("");
	                	$('#useMenu' + (selectorNum-5)).text("");
	                	$('#totalData' + (selectorNum-5)).text("");
	                	$('#yRanking' + (selectorNum-5)).text("");
	                	$('#yRankblock' + (selectorNum-5) + '_1').text('');
	                	$('#yRankblock' + (selectorNum-5) + '_2').text('');
	                	$('#rankingImg' + (selectorNum-5)).attr('src', "");
           	 		}           			
                    $("#gridItem" + (selectorNum-5)).removeClass("grid__item--animate");
                }, 350);	 
            }        
        }
        
        // 그리드 행선택 효과 함수
        function rotatetextColor(gridNum){
            if(gridNum == 1){
                $('#gridItem' + gridNum).css('color', '#fff');
                $('#gridItem' + (gridNum+1)).css('color', '#cccccc');
                $('#gridItem' + (gridNum+2)).css('color', '#cccccc');
                $('#gridItem' + (gridNum+3)).css('color', '#cccccc');
                $('#gridItem' + (gridNum+4)).css('color', '#cccccc');
                gridNum=1;
            } else if(gridNum == 2) {
                $('#gridItem' + (gridNum-1)).css('color', '#cccccc');
                $('#gridItem' + (gridNum)).css('color', '#fff');
                $('#gridItem' + (gridNum+1)).css('color', '#cccccc');
                $('#gridItem' + (gridNum+2)).css('color', '#cccccc');
                $('#gridItem' + (gridNum+3)).css('color', '#cccccc');
                gridNum=3;
            } else if(gridNum == 3) {
                $('#gridItem' + (gridNum-2)).css('color', '#cccccc');
                $('#gridItem' + (gridNum-1)).css('color', '#cccccc');
                $('#gridItem' + (gridNum)).css('color', '#fff');
                $('#gridItem' + (gridNum+1)).css('color', '#cccccc');
                $('#gridItem' + (gridNum+2)).css('color', '#cccccc');
                gridNum=4;
            } else if(gridNum == 4) {
                $('#gridItem' + (gridNum-3)).css('color', '#cccccc');
                $('#gridItem' + (gridNum-2)).css('color', '#cccccc');
                $('#gridItem' + (gridNum-1)).css('color', '#cccccc');
                $('#gridItem' + (gridNum)).css('color', '#fff');
                $('#gridItem' + (gridNum+1)).css('color', '#cccccc');
                gridNum=5;
            } else if(gridNum == 5) {
                $('#gridItem' + (gridNum-4)).css('color', '#cccccc');
                $('#gridItem' + (gridNum-3)).css('color', '#cccccc');
                $('#gridItem' + (gridNum-2)).css('color', '#cccccc');
                $('#gridItem' + (gridNum-1)).css('color', '#cccccc');
                $('#gridItem' + (gridNum)).css('color', '#fff');
                gridNum=6;
            }           
        }       
        
       
	</script>
</body>
</html>